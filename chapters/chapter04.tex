% Chapter 4
\chapter{Lebesgue Integration}
% 4.1
\section{The Riemann Integral}
\begin{flushleft}
    In this chapter the Lebesgue integral is defined in four stages:
    \begin{enumerate}
        \setcounter{enumi}{-1}
        \item (define the Riemann integral for bounded functions on a closed, bounded interval):\\\bigskip
        For a bounded real-valued function $f$ defined on the closed, bounded interval $[a,b]$, define the Riemann integral of $f$ over $[a,b]$ by
        \[
            (R)\int_a^bf=\sup\biggl\{(R)\int_a^b\varphi\ |\ \varphi\text{ step, }\varphi\le f\text{ on }[a,b]\biggr\}=\inf\biggl\{(R)\int_a^b\psi\ |\ \psi\text{ step, }\psi\ge f\text{ on }[a,b]\biggr\},
        \]
        where the Riemann integral of a step function is defined as
        \[
            (R)\int_E\psi=\sum_{k=1}^n c_k\cdot (c_k-c_{k-1}).
        \]
        \item define the (Lebesgue) integral for simple functions over a set of finite measure:\\\bigskip
        For a (measurable) simple function $\psi$ defined on a set of finite measure $E$, we define the integral of $\psi$ over $E$ by
        \[
            \int_E\psi=\sum_{i=1}^n a_i\cdot m(E_i).
        \]
        \item define the (Lebesgue) integral for bounded measurable functions $f$ over a set of finite measure, in terms of integrals of upper and lower approximations of $f$ by simple functions.\\\bigskip
        For a bounded measurable function $f$ defined on a set of finite measure $E$, we define the integral of $f$ over $E$ by
        \[
            \int_Ef=\sup\biggl\{\int_E\varphi\ |\ \varphi\text{ simple, }\varphi\le f\text{ on }E\biggr\}=\inf\biggl\{\int_E\psi\ |\ \psi\text{ simple, }\psi\ge f\text{ on }E\biggr\}.
        \]
        \item define the (Lebesgue) integral of a general nonnegative measurable function $f$ over $E$ to be the supremum of the integrals of lower approximations of $f$ by bounded measurable functions that vanish outside a set of finite measure;
        the integral of such a function is nonnegative, but may be infinite.\\\bigskip
        For a nonnegative measurable function $f$ on $E$, we define the integral of $f$ over $E$ by
        \[
            \int_Ef=\sup\biggl\{\int_Eh\ |\ h\text{ bounded, measurable, of finite support and }0\le h\le f\text{ on }E\biggr\}.
        \]
        \item define a general measurable function to be (Lebesgue) integrable over $E$ provided $\int_E |f|<\infty$.
    \end{enumerate}
    \bigskip \textbf{The Construction of the Riemann integral:}\\\bigskip
    Let $f$ be a bounded real-valued function defined on the closed, bounded interval $[a,b]$.
    Let $P=\{x_0,x_1,\cdots,x_n\}$ be a partition of $[a,b]$, that is,
    \[
        a=x_0<x_1<\cdots<x_n=b.
    \]
    Define the \textbf{lower and upper Darboux sums} for $f$ with respect to $P$, respectively, by
    \[
        L(f,P)=\sum_{i=1}^n m_i\cdot (x_i-x_{i-1})
    \]
    and
    \[
        U(f,P)=\sum_{i=1}^n M_i\cdot (x_i-x_{i-1}),
    \]
    where, for $1\le i\le n$,
    \[
        m_i=\inf\{f(x)\ |\ x_{i-1}<x<x_i\}\text{ and }M_i=\sup\{f(x)\ |\ x_{i-1}<x<x_i\}.
    \]
    We then define the \textbf{lower and upper Riemann integrals} of $f$ over $[a,b]$, respectively, by
    \[
        (R)\underline\int_a^bf=\sup\biggl\{L(f,P)\ |\ P\text{ a partition of }[a,b]\biggr\}
    \]
    and
    \[
        (R)\overline\int_a^bf=\inf\biggl\{U(f,P)\ |\ P\text{ a partition of }[a,b]\biggr\}.
    \]
    If the upper and lower integrals are equal we say that $f$ is \textbf{Riemann integrable} over $[a,b]$ and call this common value the Riemann integral of $f$ over $[a,b]$:
    \[
        (R)\int_a^bf
    \]
    A real-valued function $\psi$ defined on $[a,b]$ is called a \textbf{step function} provided there is a partition $P=\{x_0,x_1,\cdots,x_n\}$ of $[a,b]$ and numbers $c_1,\cdots,c_n$ such that for $1\le i\le n$,
    \[
        \psi(x)=c_i\text{ if }x_{i-1}<x<x_i.
    \]
    Clearly a step function is Riemann integrable:
    \[
        \sum_{i=1}^n c_i\cdot (x_i-x_{i-1})=L(\psi,P)=U(\psi,P)=(R)\int_a^b\psi
    \]
    Then we can reformulate the definition of the lower and upper Riemann integrals:
    \[
        (R)\underline\int_a^bf=\sup\biggl\{(R)\int_a^b\varphi\ |\ \varphi\text{ a step function and }\varphi\le f\text{ on }[a,b]\biggr\}
    \]
    and
    \[
        (R)\overline\int_a^bf=\inf\biggl\{(R)\int_a^b\psi\ |\ \psi\text{ a step function and }\varphi\ge f\text{ on }[a,b]\biggr\}.
    \]\\\bigskip
    \textbf{Example (Dirichlet's Function)}
    Define $f:[0,1]\to\mathbb{R}$ such that
    \[
        f(x)=
        \begin{cases}
            1&x\in\mathbb{Q}\\
            0&x\notin\mathbb{Q}
        \end{cases}    
    \] 
    Let $P$ be any partition of $[0,1]$.
    By the density of the rationals and the irrationals, for any open interval $(x_{i-1},x_i)$ generated by $P$, there exists both a rational $r$ and an irrational $s$ so that $f(r)=1$ and $f(s)=0$ and so $m_i=\inf\{f(x)\ |\ x_{i-1}<x<x_i\}\le f(r),f(s)\le\sup\{f(x)\ |\ x_{i-1}<x<x_i\}=M_i$, thus
    \[
        L(f,P)=0\text{ and }U(f,P)=1.
    \]
    Therefore
    \[
        (R)\underline\int_0^1f=0<1=(R)\overline\int_0^1f,
    \]
    so $f$ is not Riemann integrable.
    \\Consider the enumeration of the rationals in $[0,1]$: $\{q_k\}_{k=1}^\infty$.
    We can define a sequence of functions $f_n:[0,1]\to\mathbb{R}$ in the following way:
    \[
        f_n(x)=
        \begin{cases}
            1&x\in\{q_1,\cdots,q_n\}\\
            0&\text{else}
        \end{cases}
    \]
    Each $f_n$ is a step function (See any partition of the form $0=q_1<\cdots<q_n<\cdots<q_2=1$) and thus is Riemann integrable, and $\{f_n\}$ is an increasing sequence of Riemann integrable functions on $[0,1]$,
    \[
        |f_n|\le1\text{ on }[0,1]\text{ for all }n,
    \]
    and 
    \[
        \{f_n\}\to f\text{ pointwise on }[0,1].
    \]
    To see this, let $\epsilon>0$ and let $x\in[0,1]$. 
    Then $x$ is rational or irrational.
    \\If $x$ is irrational, then $|f_n(x)-f(x)|=|0-0|=0<\epsilon$.
    \\If $x$ is rational, there exists an index $N$ such that $x=q_N$ and for all $n\ge N$, we have $|f_n(q_N)-f(q_N)|=|1-1|=0<\epsilon$.
    \\Thus we have an increasing sequence of Riemann integrable functions on $[0,1]$ that converges pointwise to a function that is not Riemann integrable.
\end{flushleft}
\begin{center}
	\textbf{PROBLEMS}
\end{center}
\begin{enumerate}
	\setcounter{enumi}{0}
    \item Show that, in the above Dirichlet function example, $\{f_n\}$ fails to converge to $f$ uniformly on $[0,1]$.\\
    \\Let $\epsilon=1/2$. Then for any natural number $n$ we choose, there exists $n+1\ge n$ and $q_{n+1}\in[0,1]\cap\mathbb{Q}$ such that $|f_n(q_{n+1})-f(q_{n+1})|=|0-1|=1>1/2$.
    Therefore uniform convergence fails.
    \item A partition $P'$ of $[a,b]$ is called a refinement of a partition $P$ provided each partition point of $P$ is also a partition point of $P'$.
    For a bounded function $f$ on $[a,b]$, show that under refinement lower Darboux sums increase and upper Darboux sums decrease.\\
    \\(Ex: the partition $P'=\{a,b,c\}$ is a refinement of $P=\{a,c\}$.)
    \\Let $P=\{x_0,\cdots,x_n\}$ be any partition.
    Consider $P'$ to be a refinement of $P$ (and suppose $P'\neq P$). 
    Then for some $k\in\{1,\cdots,n\}$, there exists a point $y\in P'$ such that $x_{k-1}<y<x_k$.
    \\Now, we have 
    \begin{align*}
        \{f(x)\ |\ x_{k-1}<x<x_k\}&\supseteq\{f(x)\ |\ x_{k-1}<x<y\}\\
        \{f(x)\ |\ x_{k-1}<x<x_k\}&\supseteq\{f(x)\ |\ y<x<x_k\}
    \end{align*}
    so that
    \begin{align*}
        m_k=\inf\{f(x)\ |\ x_{k-1}<x<x_k\}&\le \inf\{f(x)\ |\ x_{k-1}<x<y\}:=m_k^l\\
        m_k=\inf\{f(x)\ |\ x_{k-1}<x<x_k\}&\le \inf\{f(x)\ |\ y<x<x_k\}:=m_k^r
    \end{align*}
    and 
    \begin{align*}
        M_k=\sup\{f(x)\ |\ x_{k-1}<x<x_k\}&\ge \sup\{f(x)\ |\ x_{k-1}<x<y\}:=M_k^l\\
        M_k=\sup\{f(x)\ |\ x_{k-1}<x<x_k\}&\ge \sup\{f(x)\ |\ x_{k-1}<x<y\}:=M_k^r
    \end{align*}
    and finally recall that the lower and upper Darboux sums with respect to $P$ are defined
    \begin{align*}
        L(f,P)=\sum_{i=1}^n m_i\cdot (x_i-x_{i-1})\\
        U(f,P)=\sum_{i=1}^n M_i\cdot (x_i-x_{i-1})
    \end{align*}
    so that at the index $k$, we have
    \begin{align*}
        m_k\cdot (x_k-x_{k-1})=m_k\cdot (y-x_{k-1})+m_k\cdot (x_k-y)\le m_k^l\cdot (y-x_{k-1})+m_k^r\cdot (x_k-y)\\
        M_k\cdot (x_k-x_{k-1})=M_k\cdot (y-x_{k-1})+M_k\cdot (x_k-y)\ge M_k^l\cdot (y-x_{k-1})+M_k^r\cdot (x_k-y)
    \end{align*}
    and then clearly the lower and upper Darboux sums $L(f,P'),U(f,P')$ with respect to $P'$ are such that
    \begin{align*}
        L(f,P)\le L(f,P'),\\
        U(f,P)\ge U(f,P').
    \end{align*}
    That is, the lower Darboux sum of any refinement is an increase, and the upper Darboux sum of any refinement is a decrease.
    \item Use the preceding problem to show that for a bounded function on a closed, bounded interval, each lower Darboux sum is no greater than each upper Darboux sum.
    From this conclude that the lower Riemann integral is no greater than the upper Riemann integral.\\
    \\Let $f$ be a bounded function on a closed, bounded interval $[a,b]$.
    \\Let $P=\{x_0,\cdots,x_n\}$ be any partition of $[a,b]$.
    \\Then for all $k\in\{1,\cdots,n\}$,
    \begin{align*}
        m_k=\inf\{f(x)\ |\ x_{k-1}<x<x_k\}&\le \sup\{f(x)\ |\ x_{k-1}<x<x_k\}=M_k,
    \end{align*}
    and therefore 
    \begin{equation}
        L(f,P)=\sum_{i=1}^n m_i\cdot (x_i-x_{i-1})\le\sum_{i=1}^n M_i\cdot (x_i-x_{i-1})=U(f,P).\tag{1}
    \end{equation}
    Then we show that the following holds:
    \[
        (R)\underline\int_a^bf=\sup\biggl\{L(f,P)\ |\ P\text{ a partition of }[a,b]\biggr\}\le \inf\biggl\{U(f,P)\ |\ P\text{ a partition of }[a,b]\biggr\}=(R)\overline\int_a^bf
    \]
    Suppose by contradiction that there exists partitions $P,B$ such that 
    \[
        \sup\biggl\{L(f,P)\ |\ P\text{ a partition of }[a,b]\biggr\}\ge L(f,P)>U(f,B)\ge \inf\biggl\{U(f,P)\ |\ P\text{ a partition of }[a,b]\biggr\}
    \]
    Then $P\cup B$ is a refinement of both $P$ and $B$, and so by the preceding Problem 2,
    \[
        L(f,P\cup B)\ge L(f,P)>U(f,B)\ge U(f,P\cup B).
    \]
    Furthermore, by (1),
    \[
        U(f,P\cup B)\ge L(f,P\cup B)\ge L(f,P)>U(f,B)\ge U(f,P\cup B),
    \]
    and we reach a contradiction.
    \item Suppose the bounded function $f$ on $[a,b]$ is Riemann integrable over $[a,b]$.
    Show that there is a sequence $\{P_n\}$ of partitions of $[a,b]$ for which $\lim_{n\to\infty}[U(f,P_n)-L(f,P_n)]=0$.\\
    \\Because $f$ is Riemann integrable, we have
    \[
        (R)\underline\int_a^bf=\sup\biggl\{L(f,P)\ |\ P\text{ a partition of }[a,b]\biggr\}=\inf\biggl\{U(f,P)\ |\ P\text{ a partition of }[a,b]\biggr\}=(R)\overline\int_a^bf.
    \]
    For each natural number $n$, let $\epsilon=1/2n$ so that, by definition of supremum and infimum, there exists partitions $P_n$ and $B_n$ such that 
    \[
        \left[(R)\underline\int_a^bf\right]-1/2n<L(f,P_n) \le\left[(R)\underline\int_a^bf\right]=(R)\int_a^bf=\left[(R)\overline\int_a^bf\right]\le U(f,B_n)<\left[(R)\overline\int_a^bf\right]+1/2n.
    \]
    Furthermore, because $P_n\cup B_n$ is a refinement of both $P_n$ and $B_n$, we have
    \[
        \left[(R)\int_a^bf\right]-1/2n<L(f,P_n)\le L(f,P_n\cup B_n) \le(R)\int_a^bf\le U(f,P_n\cup B_n)\le U(f,B_n)<\left[(R)\int_a^bf\right]+1/2n,
    \]
    and thus for each $n$, we have $U(f,P_n\cup B_n)-L(f,P_n\cup B_n)<1/n$.
    \\Therefore for the sequence $\{P_n\cup B_n\}$ of partitions of $[a,b]$, for any $\epsilon$, there exists an index $N$ such that for all $n\ge N$, then $U(f,P_n\cup B_n)-L(f,P_n\cup B_n)<1/n\le 1/N<\epsilon$.
    \item Let $f$ be a bounded function on $[a,b]$. Suppose there is a sequence $\{P_n\}$ of partitions of $[a,b]$ for which $\lim_{n\to\infty}[U(f,P_n)-L(f,P_n)]=0$. Show that $f$ is Riemann integrable over $[a,b]$.\\
    \\We say that there exists a sequence $\{P_n\}$ of partitions of $[a,b]$ such that for any $\epsilon$, there exists an index $N$ such that for all $n\ge N$, then $U(f,P_n)-L(f,P_n)<\epsilon$.
    \\In Problem 3 we showed that 
    \[
        (R)\underline\int_a^bf=\sup\biggl\{L(f,P)\ |\ P\text{ a partition of }[a,b]\biggr\}\le \inf\biggl\{U(f,P)\ |\ P\text{ a partition of }[a,b]\biggr\}=(R)\overline\int_a^bf,
    \]
    and so we have
    \[
        L(f,P_n)\le (R)\underline\int_a^bf\le (R)\overline\int_a^bf\le U(f,P_n).
    \]
    Then for any $\epsilon$, we have that $(R)\overline\int_a^bf-(R)\underline\int_a^bf<\epsilon$, and thus $(R)\overline\int_a^bf\le(R)\underline\int_a^bf$ so that $(R)\underline\int_a^bf=(R)\overline\int_a^bf$ and $f$ is Riemann integrable.
    \item Use the preceding problem to show that since a continuous function $f$ on a closed, bounded interval $[a,b]$ is uniformly continuous on $[a,b]$, it is Riemann integrable over $[a,b]$.\\
    \\(Review Chapter 1 Theorem 23 for the proof that a continuous function on a compact set is uniformly continuous.)
    \\Let $f$ be a continuous function on $[a,b]$. Then $f$ is uniformly continuous and bounded.
    That means that for any $\epsilon>0$, there exists a $\delta>0$ such that for $x,y\in[a,b]$ with $|x-y|<\delta$, then $|f(x)-f(y)|<\epsilon$.
    Therefore for each $\epsilon$, we can create a partition $P_\delta=\{x_0,\cdots,x_n\}$ of $[a,b]$ such that for any $k\in\{1,\cdots,n\}$, we have, for the interval $(x_{k-1},x_k)$, that $x_k-x_{k-1}<\delta$.
    Then for any $x,y\in(x_{k-1},x_k)$, we have $|f(x)-f(y)|<\epsilon/n$, and therefore for each $k$,
    \begin{align*}
        M_k-m_k=\sup\{f(x)\ |\ x_{k-1}<x<x_k\}-\inf\{f(x)\ |\ x_{k-1}<x<x_k\}<\epsilon/n,
    \end{align*}
    and thus
    \[
        U(f,P_\delta)-L(f,P_\delta)=\sum_{i=1}^n M_i\cdot (x_i-x_{i-1})-\sum_{i=1}^n m_i\cdot (x_i-x_{i-1})<\epsilon.
    \]
    This means that, for each natural number $m$, setting $\epsilon=1/m$, we can construct a partition $P_{\delta_m}$ such that $U(f,P_{\delta_m})-L(f,P_{\delta_m})<1/m$, and therefore $\lim_{m\to\infty}[U(f,P_{\delta_m})-L(f,P_{\delta_m})]=0$, and so by the preceding Problem 5, we have that $f$ is Riemann integrable.
    \item Let $f$ be an increasing real-valued function on $[0,1]$. For a natural number $n$, define $P_n$ to be the partition of $[0,1]$ into $n$ subintervals of length $1/n$. 
    Show that $U(f,P_n)-L(f,P_n)\le 1/n[f(1)-f(0)]$. Use Problem 5 to show that $f$ is Riemann integrable over $[0,1]$.\\
    \\Because $f$ is real-valued and increasing on $[0,1]$, we know $f$ is bounded and $0\le f(1)-f(0)<\infty$.
    Because $f$ is increasing, then for each $k$, we have
    \begin{align*}
        f(x_{k-1})\le\inf\{f(x)\ |\ x_{k-1}<x<x_k\}=m_k\le M_k=\sup\{f(x)\ |\ x_{k-1}<x<x_k\}\le f(x_k),
    \end{align*}
    so that
    \[
        M_k-m_k\le f(x_k)-f(x_{k-1}).
    \]
    Then we see that
    \begin{align*}
        U(f,P_n)-L(f,P_n)&=\sum_{i=1}^n M_i\cdot (x_i-x_{i-1})-\sum_{i=1}^n m_i\cdot (x_i-x_{i-1})\\
        &=\sum_{i=1}^n (M_i-m_i)\cdot (x_i-x_{i-1})\\
        &=\sum_{i=1}^n (M_i-m_i)\cdot (1/n)\\
        &=1/n\sum_{i=1}^n (M_i-m_i)\\
        &\le1/n \sum_{i=1}^n f(x_i)-f(x_{i-1})\\
        &=1/n [f(x_n)-f(x_0)]\\
        &=1/n [f(1)-f(0)].
    \end{align*}
    Then because we just proved that for each natural number $n$, we have $U(f,P_n)-L(f,P_n)\le 1/n[f(1)-f(0)]$, then $\lim_{n\to\infty}[U(f,P_n)-L(f,P_n)]=0$, so by Problem 5, $f$ is Riemann integrable.
    \item Let $\{f_n\}$ be a sequence of bounded functions that converges uniformly to $f$ on the closed, bounded interval $[a,b]$. 
    If each $f_n$ is Riemann integrable over $[a,b]$, show that $f$ also is Riemann integrable over $[a,b]$. Is it true that
    \[
        \lim_{n\to\infty}\int_a^bf_n=\int_a^bf?  
    \]
    For any partition $P=\{x_0,\cdots,x_\ell\}$, we have 
    \begin{align*}
        U(f,P)-L(f,P)&=U(f,P)-U(f_n,P)+U(f_n,P)-L(f_n,P)+L(f_n,P)-L(f,P).
    \end{align*}
    Uniform convergence means that for any $\epsilon>0$, then there exists an index $N$ such that for all $n\ge N$, then $|f(x)-f_n(x)|<\frac{\epsilon}{3\ell}$ for all $x\in[a,b]$.
    \\We see that for any $x\in[a,b]$,
    \[
        -\frac{\epsilon}{3\ell}<f(x)-f_n(x)<\frac{\epsilon}{3\ell}.
    \]
    \\Then for any $k\in\{1,\cdots,\ell\}$, we see that
    \begin{align*}
        M_k=\sup\{f(x)\ |\ x_{k-1}<x<x_k\}&=\sup\{f(x)-f_n(x)+f_n(x)\ |\ x_{k-1}<x<x_k\}\\
        &<\sup\{\frac{\epsilon}{3\ell}+f_n(x)\ |\ x_{k-1}<x<x_k\}\\
        &=\frac{\epsilon}{3\ell}+\sup\{f_n(x)\ |\ x_{k-1}<x<x_k\}\\
        &=\frac{\epsilon}{3\ell}+(M_n)_k
    \end{align*}
    and 
    \begin{align*}
        m_k=\inf\{f(x)\ |\ x_{k-1}<x<x_k\}&=\inf\{f(x)-f_n(x)+f_n(x)\ |\ x_{k-1}<x<x_k\}\\
        &>\inf\{-\frac{\epsilon}{3\ell}+f_n(x)\ |\ x_{k-1}<x<x_k\}\\
        &=-\frac{\epsilon}{3\ell}+\inf\{f_n(x)\ |\ x_{k-1}<x<x_k\}\\
        &=-\frac{\epsilon}{3\ell}+(m_n)_k
    \end{align*}
    Then the Darboux sums are such that
    \begin{align*}
        U(f,P)=\sum_{k=1}^\ell M_k(x_k-x_{k-1})&<\sum_{k=1}^\ell\frac{\epsilon}{3\ell}+\sum_{k=1}^\ell(M_n)_k(x_k-x_{k-1})\\
        &=\frac{\epsilon}{3}+U(f_n,P)
    \end{align*}
    and 
    \begin{align*}
        L(f,P)=\sum_{k=1}^\ell m_k(x_k-x_{k-1})&>-\sum_{k=1}^\ell\frac{\epsilon}{3\ell}+\sum_{k=1}^\ell(m_n)_k(x_k-x_{k-1})\\
        &=-\frac{\epsilon}{3}+L(f_n,P)
    \end{align*}
    Therefore we have
    \begin{align*}
        U(f,P)-L(f,P)&=U(f,P)-U(f_n,P)+U(f_n,P)-L(f_n,P)+L(f_n,P)-L(f,P)\\
        &=[U(f,P)-U(f_n,P)]+[U(f_n,P)-L(f_n,P)]+[L(f_n,P)-L(f,P)]\\
        &<\frac{\epsilon}{3}+[U(f_n,P)-L(f_n,P)]+\frac{\epsilon}{3}.
    \end{align*}
    Because each $f_n$ is bounded and Riemann integrable over $[a,b]$, then by Problem 4, we proved there is a sequence $\{P_m\}_{m=1}^\infty$ of partitions of $[a,b]$ s.t. $\lim_{m\to\infty}[U(f_n,P_m)-L(f_n,P_m)]=0$.
    Therefore for any $\epsilon>0$, there exists an index $N$ such that $U(f,P_m)-U(f_n,P_m)<\frac{\epsilon}{3}$ for $m\ge N$.
    \begin{align*}
        U(f,P_m)-L(f,P_m)&<\frac{\epsilon}{3}+[U(f_n,P_m)-L(f_n,P_m)]+\frac{\epsilon}{3}\\
        &<\frac{\epsilon}{3}+\frac{\epsilon}{3}+\frac{\epsilon}{3}\\
        &=\epsilon.
    \end{align*}
    Thus because there is a sequence $\{P_m\}_{m=1}^\infty$ of partitions of $[a,b]$ s.t. $\lim_{m\to\infty}[U(f,P_m)-L(f,P_m)]=0$, by Problem 5, $f$ is Riemann integrable.
    \\Also, yes, it is true that $\lim_{n\to\infty}\int_a^bf_n=\int_a^bf$.
\end{enumerate}

% 4.2
\section{The Lebesgue Integral of a Bounded Measurable Function over a Set of Finite Measure}
\begin{flushleft}
    Recall the definition of a simple function:
    If $\psi$ is simple, has domain $E$ and takes the distinct values $a_1,\cdots,a_n$, then
    \begin{equation}
        \psi=\sum_{k=1}^n a_i\cdot\chi_{E_i}\text{ on }E,\text{ where }E_i=\psi^{-1}(a_i)=\{x\in E\ |\ \psi(x)=a_i\}.\tag{1}   
    \end{equation}
    The canonical representation is characterized by the $E_i$'s being disjoint and the $a_i$'s being distinct.
    \begin{namedthm*}{Definition}
        For a simple function $\psi$ defined on a set of finite measure $E$, we define the integral of $\psi$ over $E$ by
        \[
            \int_E\psi=\sum_{i=1}^n a_i\cdot m(E_i),
        \]
        where $\psi$ has the canonical representation given by (1).
    \end{namedthm*}
    Let $f$ be a bounded real-valued function defined on a set of finite measure $E$.
    We define the \textbf{lower and upper Lebesgue integral}, respectively, of $f$ over $E$ to begin
    \[
        \sup\biggl\{\int_E\varphi\ |\ \varphi\text{ simple and }\varphi\le f\text{ on }E\biggr\},
    \]
    and
    \[
        \inf\biggl\{\int_E\psi\ |\ \psi\text{ simple and }\varphi\ge f\text{ on }E\biggr\}.
    \]
    \begin{namedthm*}{Definition}
        A bounded function $f$ on a domain $E$ of finite measure is said to be \textbf{Lebesgue measurable} over $E$ provided its upper and lower Lebesgue integrals over $E$ are equal.
        The common value of the upper and lower integrals is called the \textbf{Lebesgue integral}, or simply the integral, of $f$ over $E$ and is denoted by $\int_Ef$.
    \end{namedthm*}
    \begin{namedthm*}{Theorem 3}    
        Let $f$ be a bounded function defined on the closed, bounded interval $[a,b]$.
        If $f$ is Riemann integrable over $[a,b]$, then it is Lebesgue integrable over $[a,b]$ and the two integrals are equal.
    \end{namedthm*}
    \begin{proof}
        Saying that $f$ is Riemann integrable means that
        \[
            (R)\int_Ef=\sup\biggl\{(R)\int_a^b\varphi\ |\ \varphi\text{ step and }\varphi\le f\text{ on }[a,b]\biggr\}=\inf\biggl\{(R)\int_a^b\psi\ |\ \psi\text{ step and }\varphi\ge f\text{ on }[a,b]\biggr\}.
        \]
        The Riemann integral over a closed, bounded interval of a step function agrees with the Lebesgue integral.
        Therefore because all step functions are simple functions we have 
        \begin{align*}
            \biggl\{(R)\int_a^b\varphi\ |\ \varphi\text{ step and }\varphi\le f\text{ on }[a,b]\biggr\}
            &\subseteq \biggl\{\int_E\varphi\ |\ \varphi\text{ simple and }\varphi\le f\text{ on }E\biggr\}\\
            \biggl\{(R)\int_a^b\psi\ |\ \psi\text{ step and }\varphi\ge f\text{ on }[a,b]\biggr\}
            &\subseteq\biggl\{\int_E\psi\ |\ \psi\text{ simple and }\varphi\ge f\text{ on }E\biggr\}
        \end{align*}
        and thus
        \begin{align*}
            \sup\biggl\{(R)\int_a^b\varphi\ |\ \varphi\text{ step and }\varphi\le f\text{ on }[a,b]\biggr\}
            &\le \sup\biggl\{\int_E\varphi\ |\ \varphi\text{ simple and }\varphi\le f\text{ on }E\biggr\}\\
            \inf\biggl\{(R)\int_a^b\psi\ |\ \psi\text{ step and }\varphi\ge f\text{ on }[a,b]\biggr\}
            &\ge\inf\biggl\{\int_E\psi\ |\ \psi\text{ simple and }\varphi\ge f\text{ on }E\biggr\}
        \end{align*}
        Thus we can write
        \begin{align*}
            (R)\int_Ef&= \sup\biggl\{(R)\int_a^b\varphi\ |\ \varphi\text{ step and }\varphi\le f\text{ on }[a,b]\biggr\}\\
            &\le\sup\biggl\{\int_E\varphi\ |\ \varphi\text{ simple and }\varphi\le f\text{ on }E\biggr\}\\
            &\le\inf\biggl\{\int_E\psi\ |\ \psi\text{ simple and }\varphi\ge f\text{ on }E\biggr\}\\
            &\le\inf\biggl\{(R)\int_a^b\psi\ |\ \psi\text{ step and }\varphi\ge f\text{ on }[a,b]\biggr\}\\
            &=(R)\int_Ef,
        \end{align*}
        and $f$ is Lebesgue integrable with $\int_Ef=(R)\int_Ef$.
        \\\bigskip
        \textbf{Example} The Dirichlet function is a simple function because 
        \[
        f(x)=
        \begin{cases}
            1&x\in\mathbb{Q}\\
            0&x\notin\mathbb{Q}
        \end{cases}    
        \] 
        so that 
        \[
            f(x)=1\cdot\chi_{\mathbb{Q}\cap[0,1]}+0\cdot\chi_{\mathbb{Q}^c\cap[0,1]}=1\cdot\chi_{\mathbb{Q}\cap[0,1]}\text{ on }[0,1],
        \]
        where
        \begin{align*}
            \mathbb{Q}\cap[0,1]&=f^{-1}(1)=\{x\in [0,1]\ |\ f(x)=1\},\\
            \mathbb{Q}^c\cap[0,1]&=f^{-1}(0)=\{x\in [0,1]\ |\ f(x)=0\}.
        \end{align*}
        Then $f$ is Lebesgue integrable (but not Riemann integrable) with
        \[
            \int_{[0,1]}f=1\cdot m(\mathbb{Q}\cap[0,1])+0\cdot m(\mathbb{Q}^c\cap[0,1])=1\cdot0+0\cdot1=0.
        \]
    \end{proof}
    \begin{namedthm*}{Theorem 4}    
        Let $f$ be a bounded measurable function on a set of finite measure $E$.
        Then $f$ is integrable over $E$.
    \end{namedthm*}
    \begin{proof}
        For each natural number $n$, by the Simple Approximation Lemma, for $\epsilon=1/n>0$, there are two simple functions $\varphi_n$ and $\psi_n$ on $E$ for which
        \[
            \varphi_n\le f\le\psi_n\text{ and }0\le\psi_n-\varphi_n\le1/n\text{ on }E.    
        \]
        By the monotonicity of the integral for simple functions,
        \[
            0\le\int_E[\psi_n-\varphi_n]\le1/n\cdot m(E).       
        \]
        Then by linearity of the integral for simple functions,
        \[
            0\le\int_E\psi_n-\int_E\varphi_n\le1/n\cdot m(E).       
        \]
        Then 
        \begin{align*}
            0&\le\inf\biggl\{\int_E\psi\ |\ \psi\text{ simple, }\psi\ge f\biggr\}-\sup\biggl\{\int_E\varphi\ |\ \varphi\text{ simple, }\varphi\le f\biggr\}\\
            &\le\int_E\psi_n-\int_E\varphi_n\\
            &\le1/n\cdot m(E).       
        \end{align*}
        Then $\inf\{\int_E\psi\ |\ \psi\text{ simple, }\psi\ge f\}=\sup\{\int_E\varphi\ |\ \varphi\text{ simple, }\varphi\ge f\}$ and thus $f$ is integrable over $E$.
    \end{proof}
    $\cdots$\\\bigskip
    \begin{namedthm*}{Corollary 6}  
        Let $f$ be a bounded measurable function on a set of finite measure $E$.
        Suppose $A$ and $B$ are disjoint measurable subsets of $E$. 
        Then
        \[
            \int_{A\cup B}f=\int_Af+\int_Bf.
        \]   
    \end{namedthm*}
    \begin{proof}
        Both $f\cdot\chi_A$ and $f\cdot\chi_B$ are bounded measurable functions on $E$.
        Since $A$ and $B$ are disjoint, see Chapter 3 Problem 20 to see that
        \[
            f\cdot\chi_{A\cup B}=f\cdot(\chi_A+\chi_B+\chi_{A\cap B})=f\cdot(\chi_A+\chi_B+0)=f\cdot\chi_A+f\cdot\chi_B.    
        \]
        Furthermore, for any measurable subset $E_1$ of $E$ (see Problem 10),
        \[
            \int_{E_1}f=\int_{E}f\cdot\chi_{E_1}.    
        \]
        Therefore, by linearity of integration,
        \[
            \int_{A\cup B}f= \int_{E}f\cdot\chi_{A\cup B}=\int_{E}f\cdot\chi_{A}+\int_{E}f\cdot\chi_{B}=\int_Af+\int_Bf.
        \]
    \end{proof}
    \begin{namedthm*}{Corollary 7}
        Let $f$ be a bounded measurable function on a set of finite measure $E$.
        Then
        \[
            \biggl|\int_Ef\biggr|\le\int_E|f|.
        \]
    \end{namedthm*}
    \begin{proof}
        The function $|f|$ is measurable (see Chapter 3 Proposition 7) and bounded: $|f|\le|f|$ on $E$, so that
        \[
            -|f|\le f\le|f|\text{ on }E.
        \]
        Therefore by linearity and monotonicity of integration,
        \[
            -\int_E|f|\le \int_Ef\le\int_E|f|,
        \]
        and therefore $|\int_Ef|\le\int_E|f|$.
    \end{proof}
    \begin{namedthm*}{Proposition 8}
        Let $\{f_n\}$ be a sequence of bounded measurable functions on a set of finite measure $E$.
        \[
            \text{If }\{f_n\}\to f\text{ uniformly on }E,\text{ then }\lim_{n\to\infty}\int_Ef_n=\int_Ef.    
        \]
    \end{namedthm*}
    \begin{proof}
        Since the convergence is uniform and each $f_n$ is bounded, then the limit function $f$ is bounded.
        The function $f$ is measurable since it is the pointwise limit of a sequence of measurable functions (see Chapter 3 Proposition 9).
        \\Let $\epsilon>0$.
        By uniform convergence, there exists an index $N$ such that 
        \[
            |f-f_n|<\frac{\epsilon}{m(E)}\text{ on $E$ for all }n\ge N. 
        \]
        Then
        \begin{align*}
            |\int_Ef-\int_Ef_n|&=|\int_E[f-f_n]|&&\text{linearity of integration}\\
            &\le\int_E|f-f_n|&&\text{Corollary 7}\\
            &<\int_E[\frac{\epsilon}{m(E)}]\cdot1&&\text{monotonicity of integration}\\
            &=[\frac{\epsilon}{m(E)}]\cdot m(E)\\
            &=\epsilon.
        \end{align*}
        Therefore $\lim_{n\to\infty}\int_Ef_n=\int_Ef$.
    \end{proof}
    Recall an example from Chapter 3.2:
        \\Consider the sequence of continuous functions $\{f_n\}_{n=2}^\infty:[0,1]\to\mathbb{R}$, defined by
        \[ 
		f_n(x) =
            \begin{cases} 
                \frac{n-0}{1/n-0}x& \text{ if } x \in [0,\frac{1}{n}]\\
                \frac{0-n}{2/n-1/n}(x-\frac{1}{n})+n & \text{ if } x \in (\frac{1}{n},\frac{2}{n}]\\
                0& \text{ if } x \in (\frac{2}{n},1]
            \end{cases}
            =
            \begin{cases} 
                n^2x& \text{ if } x \in [0,\frac{1}{n}]\\
                -n^2(x-\frac{1}{n})+n & \text{ if } x \in (\frac{1}{n},\frac{2}{n}]\\
                0& \text{ if } x \in (\frac{2}{n},1]
            \end{cases}
	    \]
        (Each $f_n$ is a triangle-shaped function that achieves its max $f(1/n)=n$ and base corners $f(0)=0$ and $f(2/n)=0$.)\\
        In addition, consider the continuous function $f:[0,1]\to\mathbb{R}$ defined by $f(x)=0$ for all $x\in[0,1]$.\\\bigskip
        The sequence $\{f_n\}$ converges to $f$ pointwise (a.e) but not uniformly on $[0,1]$.
        \\Thus we have
        \[
            \{f_n\}\to f\text{ pointwise on }[0,1],\text{ but }\lim_{n\to\infty}\int_0^1f_n=1\neq0=\int_0^1f.
        \]
        \\Another example: we can define a sequence of nonnegative, measurable, continuous functions on $[0,1]$ by
        \[
            f_n(x)=
            \begin{cases}
                -n^2x+n&x\in[0,\frac{1}{n}]\\
                0&x\in(\frac{1}{n},1]
            \end{cases}
        \]
        Then $\{f_n\}\to f\equiv0$ pointwise a.e. on $[0,1]$, but $\int_{[0,1]}f_n=1/2$ for all $n$, and so
        \[
            \lim_{n\to\infty}\int_{[0,1]}f_n=1/2\neq0=\int_{[0,1]}f.
        \]
    \begin{namedthm*}{The Bounded Convergence Theorem}
        Let $\{f_n\}$ be a sequence of measurable functions on a set of finite measure $E$.
        Suppose $\{f_n\}$ is uniformly pointwise bounded on $E$; that is, there is a number $M\ge0$ for which
        \[
            |f_n|\le M\text{ on }E\text{ for all }n.
        \]
        \[
            \text{ If }\{f_n\}\to f\text{ pointwise on }E,\text{ then }\lim_{n\to\infty}\int_Ef_n=\int_Ef.   
        \]
    \end{namedthm*}
    \begin{proof}
        The pointwise limit of a sequence of measurable functions is measurable (Chapter 3 Proposition 9).
        Therefore $f$ is measurable.
        Also, clearly $|f|\le M$ on $E$.
        Let $A$ be any measurable subset of $E$ and $n$ a natural number.
        \\Then
        \begin{align*}
            \int_Ef_n-\int_Ef&=\int_E[f_n-f]\\
            &=\int_A[f_n-f]+\int_{E\setminus A}[f_n-f]&&\text{Corollary 6}\\
            &=\int_A[f_n-f]+\int_{E\setminus A}f_n+\int_{E\setminus A}(-f)&&\text{Linearity of integration}\\
            &\le\int_A[f_n-f]+\int_{E\setminus A}M+\int_{E\setminus A}M&&\text{Monotonicity of integration: }|f_n|,|f|\le M\\
            &=\int_A[f_n-f]+2M\cdot m(E\setminus A)&&\text{Integral of constant functions}\\
        \end{align*} 
        And by the triangle inequality and Corollary 7,
        \begin{align*}
            \left|\int_Ef_n-\int_Ef\right|
            &\le|\int_A[f_n-f]|+|2M\cdot m(E\setminus A)|
            \le\int_A|f_n-f|+2M\cdot m(E\setminus A)
        \end{align*}
        Now let $\epsilon>0$.
        \\Because $E$ has finite measure and $\{f_n\}$ converges pointwise to $f$ on $E$, then by Egoroff's Theorem, there is a measurable subset $A$ of $E$ for which $\{f_n\}\to f$ uniformly on $A$ and $m(E\setminus A)<\epsilon/4M$.
        Then by uniform convergence, there is an index $N$ for which 
        \[
            |f_n-f|<\frac{\epsilon}{2\cdot m(E)}\text{ on }A\text{ for all }n\ge N.
        \]
        Therefore, because $A\subseteq E\implies m(A)\le m(E)<\infty\implies \frac{m(A)}{m(E)}\le1$, using monotonicity of integration,
        \begin{align*}
            \left|\int_Ef_n-\int_Ef\right|&\le\int_A|f_n-f|+2M\cdot m(E\setminus A)\\
            &<\int_A\frac{\epsilon}{2\cdot m(E)}+2M\cdot\epsilon/4M\\
            &=\frac{\epsilon}{2\cdot m(E)}m(A)+\epsilon/2\\
            &\le\frac{\epsilon}{2}+\frac{\epsilon}{2}\\
            &=\epsilon.
        \end{align*}
        Therefore the sequence of integrals $\{\int_Ef\}$ converges to $\int_Ef$.
    \end{proof}
\begin{namedthm*}{Remark}
    Prior to the proof of the Bounded Convergence Theorem, no use was made of the countable additivity of the Lebesgue measure on the real line.
    Only finite additivity was used, and it was used just once, in the proof of Lemma 1. But for the proof of the Bounded Convergence Theorem we used Egoroff's Theorem.
    Egoroff's Theorem needed the continuity of Lebesgue measure, a consequence of countable additivity of Lebesgue measure.    
\end{namedthm*}

\end{flushleft}
\begin{center}
	\textbf{PROBLEMS}
\end{center}
\begin{enumerate}
	\setcounter{enumi}{8}
    \item Let $E$ have measure zero. Show that if $f$ is a bounded function on $E$, then $f$ is measurable and $\int_Ef=0$.\\
    \\First, consider any simple function $\psi$ defined on $E$, taking the values $a_1,\cdots,a_n$ on the subsets $E_1,\cdots,E_n$ of $E$.
    \\For any $i\in\{1,\cdots,n\}$, by monotonicity of Lebesgue measure, $m(E_i)\le m(E)=0\implies m(E_i)=0$.
    Therefore the integral of any simple function on $E$ is zero:
    \[
        \int_E\psi=\sum_{i=1}^n a_i\cdot m(E_i)=\sum_{i=1}^n a_i\cdot 0=0
    \]
    Thus for the bounded function $f$ on the set of finite measure $E$, we have
    \[
        \sup\biggl\{\int_E\varphi\ |\ \varphi\text{ simple, }\varphi\le f\text{ on }E\biggr\}=0=\inf\biggl\{\int_E\psi\ |\ \psi\text{ simple, }\psi\ge f\text{ on }E\biggr\},
    \]
    and $f$ is Lebesgue integrable with $\int_Ef=0$.\\
    \\To see that $f$ is measurable, consider any sequence of simple (measurable) functions $\{\varphi_n\}$ on $E$.
    This sequence trivially converges pointwise $a.e.$ on $E$ to the function $f$ because it converges pointwise on the set $\emptyset=E\setminus E$, where $E\subseteq E$ with $m(E)=0$.
    Then by Chapter 3 Proposition 9, $f$ is measurable.\\
    \\(A bounded function on a set of finite measure is Lebesgue integrable iff it is measurable;
    \\$(\implies)$ Chapter 5 Theorem 7, 
    \\$(\impliedby)$ Chapter 4 Theorem 4)
    \item Let $f$ be a bounded measurable function on a set of finite measure $E$. For a measurable subset $A$ of $E$, show that $\int_Af=\int_Ef\cdot\chi_A$.\\
    \\For any simple function $\psi$ on $E$, we have
    \[
        \psi=\sum_{k=1}^nc_k\cdot \chi_{E_k},
    \]
    Then for the measurable subset $A$ of $E$, the restriction of $\psi$ to $A$ is measurable and so
    \[
        \psi_{|_A}=\sum_{k=1}^nc_k\cdot \chi_{E_k\cap A},\text{ where }E_k\cap A=\{x\in E\ |\ \psi(x)=c_k\}\cap A =\{x\in A\ |\ \psi_{|_A}(x)=c_k\}
    \]
    Also, we consider the measurable function $\chi_A$ on $E$, and clearly the product $\psi\cdot\chi_A$ is measurable (and simple) so that
    \[
        \psi\cdot\chi_A=\sum_{k=1}^nc_k\cdot \chi_{E_k}\cdot\chi_{A}=\sum_{k=1}^nc_k\cdot \chi_{E_k\cap A},
    \]
    and therefore 
    \[
        \int_A\psi=\sum_{k=1}^n c_k\cdot m(E_k\cap A)=\int_E\psi\cdot\chi_A.
    \]
    Now, to show $\int_Af=\int_Ef\cdot\chi_A$ it is sufficient to see that $\int_Af\le\int_Ef\cdot\chi_A$ and $\int_Af\ge\int_Ef\cdot\chi_A$.\\ 
    \\For any simple function $\varphi'$ on $E$ such that $\varphi'\le f$, we have $\varphi'\cdot\chi_A\le f\cdot\chi_A$ on $E$, and so
    \[
        \int_A\varphi'=\int_E\varphi'\cdot\chi_A\le\sup\biggl\{\int_E\varphi\ |\ \varphi\text{ simple, }\varphi\le f\cdot\chi_A\text{ on }E\biggr\}=\int_Ef\cdot\chi_A
    \]
    Then the supremum of all such $\varphi'$ shows that
    \[
        \int_Af=\sup\biggl\{\int_A\varphi'\ |\ \varphi'\text{ simple, }\varphi'\le f\text{ on }A\biggr\}\le\int_Ef\cdot\chi_A\tag{1}
    \]
    Again, for any simple function $\psi'$ on $E$ such that $\psi'\ge f$, we have $\psi'\cdot\chi_A\ge f\cdot\chi_A$ on $E$, and so
    \[
        \int_A\psi'=\int_E\psi'\cdot\chi_A\ge\inf\biggl\{\int_E\psi\ |\ \psi\text{ simple, }\psi\ge f\cdot\chi_A\text{ on }E\biggr\}=\int_Ef\cdot\chi_A
    \]
    Then the infimum of all such $\psi'$ shows that
    \[
        \int_Af=\inf\biggl\{\int_A\psi'\ |\ \psi'\text{ simple, }\psi'\ge f\text{ on }A\biggr\}\ge\int_Ef\cdot\chi_A\tag{2}
    \]
    Therefore by $(1)$ and $(2)$ we have $\int_Af=\int_Ef\cdot\chi_A$.
    \item Does the Bounded Convergence Theorem hold for the Riemann integral?\\
    \\No. Recall the Dirichlet function example. 
    The sequence of measurable functions $\{f_n\}$ on the set of finite measure $[0,1]$ is uniformly bounded on $[0,1]$ as each $f_n\in\{0,1\}$ so that 
    \[
        |f_n|\le1\text{ on }[0,1]\text{ for all }n. 
    \]
    Then for the Dirichlet function $f$,
    \[
        \{f_n\}\to f\text{ pointwise on }[0,1],\text{ but }(R)\underline\int_0^1f=0<1=(R)\overline\int_0^1f,
    \]
    so that $f$ is not Riemann integrable and so $(R)\int_0^1f$ is not defined, and we cannot say anything about if $\lim_{n\to\infty}(R)\int_0^1f_n=(R)\int_0^1f$.
    \item Let $f$ be a bounded measurable function on a set of finite measure $E$. Assume $g$ is bounded and $f=g$ a.e. on $E$. Show that $\int_Ef=\int_Eg$.\\
    \\Because $f=g$ a.e. on $E$, then $f=g$ on $E\setminus E_0$, where $m(E_0)=0$.
    Recall from Chapter 3 Proposition 5 $(i)$ that $f$ is measurable on $E$ and $f=g$ a.e. on $E$ implies that $g$ is measurable on $E$.
    \\Then 
    \begin{align*}
        \int_Ef&=\int_{E\setminus E_0}f+\int_{E_0}f&&\text{Corollary 6}\\
        &=\int_{E\setminus E_0}f&&\text{Problem 9: }\int_{E_0}f=0\\
        &=\int_{E\setminus E_0}g&&\text{$f=g$ on $E\setminus E_0$}\\
        &=\int_Eg-\int_{E_0}g&&\text{Corollary 6}\\
        &=\int_Eg.&&\text{Problem 9: }\int_{E_0}g=0
    \end{align*}
    \item Does the Bounded Convergence Theorem hold if $m(E)<\infty$ but we drop the assumption that the sequence $\{|f_n|\}$ is uniformly bounded on $E$?\\ 
    \\No, see the example of the sequence of continuous (and thus measurable) triangular functions $\{f_n\}$ on $E=[0,1]$ so that $m(E)=1<\infty$.
    But $\{f_n\}=\{|f_n|\}$ is not uniformly bounded on $E$ because for every number $M\in\mathbb{N}$ we choose, there always exists the function $f_{N+1}$ with $f_{N+1}(\frac{1}{N+1})=N+1>N$.
    \\Then for the function $f\equiv0$ on $[0,1]$,
    \[
        \{f_n\}\to f\text{ pointwise on }[0,1],\text{ but }\lim_{n\to\infty}\int_0^1f_n=1\neq0=\int_0^1f,
    \]
    and the Bounded Convergence Theorem does not hold.
    \item Show that Proposition 8 is a special case of the Bounded Convergence Theorem.\\
    \\We see that since the convergence is uniform, then for $\epsilon>0$, there exists an index $N$ such that for all $n\ge N$,
    \[
        |f|-|f_n|\le|f-f_n|<\epsilon\text{ on }E.\tag{1}
    \]
    Also, since each $f_n$ is bounded, we have 
    \[
        |f_n|\le M_n\text{ on }E.
    \]
    Therefore at the index $N$, we have for any $\epsilon>0$,
    \[
        |f|<|f_N|+\epsilon\le M_N+\epsilon,
    \]
    and thus $f$ is bounded: $|f|\le M_N$ on $E$.\\
    \\To show that $\{f_n\}$ is uniformly bounded, we can set $\epsilon=1$ so that there exists an index $N'$ such that for all $n\ge N'$, by $(1)$, we have
    \[
        |f_n|<|f|+1\le M_N+1\text{ on }E.
    \]
    Then we have for all $n\in\mathbb{N}$,
    \[
        |f_n|\le\max\{M_1,\cdots,M_{N'},M_N+1\}\text{ on }E,
    \]
    and the sequence $\{f_n\}$ is uniformly bounded on $E$.\\
    \\Then Proposition 8 is a special case of the Bounded Convergence Theorem because it requires $\{f_n\}$ to converge uniformly to $f$.
    \item Verify the assertions in the last Remark of this section.\\
    \\This is true; we have:
    \begin{itemize}
        \item Continuity of measure uses countable additivity of measure,
        \item Lemma 10 uses continuity of measure,
        \item Egoroff's Theorem uses Lemma 10,
        \item Bounded Convergence Theorem uses Egoroff's Theorem.
    \end{itemize}
    \item Let $f$ be a nonnegative bounded measurable function on a set of finite measure $E$. Assume $\int_Ef=0$. Show that $f=0$ a.e. on $E$.\\
    \\We can suppose by contradiction that $f=0$ on $E\setminus E_0$, but $m(E_0)\neq0$.
    \\So $f>0$ on $E_0$, or in other words, 
    \[
        0<m(E_0)=m(\{x\in E\ |\ f(x)>0\})=m(\bigcup_{n=1}^\infty\{x\in E\ |\ f(x)\ge1/n\})=m(\bigcup_{n=1}^\infty E_n)\le \sum_{n=1}^\infty m(E_n).
    \]
    Then there must exist an index $k$ for which $m(E_k)\neq0$, else we have $0<m(E_0)\le\sum_{n=1}^\infty 0=0$ and reach a contradiction.
    \\Thus we have that $f\ge 1/k$ on $E_k$, with $m(E_k)>0$.
    \\Therefore it is possible to define the simple function $\varphi_k$ on $E$ such that $\varphi_n \le f$ on $E$:
    \[
        \varphi_k(x)=
        \begin{cases}
            1/k&x\in E_k\\
            0&x\notin E_k
        \end{cases}    
    \]
    where, because $1/k>0$ and $m(E_k)>0$, 
    \[
        \int_E\varphi_k=\frac{1}{k}\cdot m(E_k)+0\cdot m(E_k^c)=\frac{1}{k}\cdot m(E_k)>0.
    \]
    But then we have
    \[
        \int_E\varphi_k>0=\int_Ef=\sup\biggl\{\int_E\varphi\ |\ \varphi\text{ simple, }\varphi\le f\text{ on }E\biggr\},
    \]
    a contradiction to the supremum.
\end{enumerate}

% 4.3
\section{The Lebesgue Integral of a Measurable Nonnegative Function}
\begin{flushleft}
    A function $f$ on $E$ is said to be of finite support provided it vanishes outside a set of finite measure, that is, there exists a set $E_0$ such that $m(E_0)<\infty$ and $f\equiv0$ on $E\setminus E_0$.
    Therefore $f=f\cdot\chi_{E_0}$ so that 
    \[
        \int_{E_0}f=\int_Ef\cdot\chi_{E_0}=\int_Ef.
    \]
    \begin{namedthm*}{Definition}
        For a nonnegative measurable function $f$ on $E$, we define the integral of $f$ over $E$ by
        \[
            \int_Ef=\sup\biggl\{\int_Eh\ |\ h\text{ bounded, measurable, of finite support and }0\le h\le f\text{ on }E\biggr\}.
        \]
    \end{namedthm*}
    \begin{namedthm*}{Chebyshev's Inequality}
        Let $f$ be a nonnegative measurable function on $E$.
        Then for any $\lambda>0$, 
        \[
            m\{x\in E\ |\ f(x)\ge\lambda\}\le\frac{1}{\lambda}\cdot\int_Ef.\tag{9}
        \]
    \end{namedthm*}
    \begin{proof}
        Define $E_\lambda=\{x\in E\ |\ f(x)\ge\lambda\}$. 
        \\First suppose $m(E_\lambda)=\infty$.
        \\Then for a natural number $n$, define $E_{\lambda,n}=E_\lambda\cap[-n,n]$ and $\psi_n=\lambda\cdot\chi_{E_{\lambda,n}}$.
        Then $\psi_n$ is a bounded measurable function of finite support, 
        \[
            \lambda\cdot m(E_{\lambda,n})=\int_{E_{\lambda,n}}\lambda\cdot1=\int_E\lambda\cdot\chi_{E_{\lambda,n}}=\int_E\psi_n\text{ and }0\le\psi_n\le f\text{ on }E\text{ for all }n.
        \]
        From the continuity of measure, because $\{E_{\lambda,n}\}_{n=1}^\infty$ is ascending and $E_\lambda=\bigcup_{n=1}^\infty E_{\lambda,n}$,
        \[
            \infty=\lambda\cdot m(E_\lambda)=\lambda\cdot \lim_{n\to\infty}m(E_{\lambda,n})=\lim_{n\to\infty}\int_E\psi_n\le\int_Ef.
        \]
        Therefore the inequality $(9)$ holds since both sides equal $\infty$.
        \\Now suppose $m(E_\lambda)<\infty$.
        \\Define $h=\lambda\cdot\chi_{E_\lambda}$.
        Then $h$ is a bounded measurable function of finite support, and $0\le h\le f$ on $E$.
        Then 
        \[
            \lambda\cdot m(E_\lambda)=\int_{E_{\lambda}}\lambda\cdot1=\int_E\lambda\cdot\chi_{E_{\lambda}}=\int_Eh\le\int_Ef.
        \]
        Thus we have $m(E_\lambda)\le\frac{1}{\lambda}\int_Ef$.
    \end{proof}
    \begin{namedthm*}{Fatou's Lemma}
        Let $\{f_n\}$ be a sequence of nonnegative measurable functions on $E$.
        \[
            \text{ If }\{f_n\}\to f\text{ pointwise a.e. on }E,\text{ then }\int_Ef\le\lim\inf\int_Ef_n.    
        \]
    \end{namedthm*}
    \begin{proof}
        Let $\{f_n\}$ converge pointwise on $E\setminus E_0$, where $m(E_0)=0$. 
        We know that sets of measure zero do not contribute to the integral. 
        That is,
        \[
            \int_Ef=\int_{E\setminus E_0}f+\int_{E_0}f=\int_{E\setminus E_0}f.
        \]
        Then by excising this set of measure zero, we can assume pointwise convergence on all of $E$ (use $E$ instead of $E\setminus E_0$ for ease of writing).
        \\Then because each $f_n$ is nonnegative, we have $0\le f_n,\ \forall n\implies 0\le f$.
        Also, because $\{f_n\}$ is a sequence of measurable functions that converges pointwise to $f$, then $f$ is also measurable.
        \\Then to verify the inequality of Fatou's Lemma, by the definition of the integral of the nonnegative measurable function $f$, it is necessary and sufficient to show that if $h$ is any bounded measurable function of finite support for which $0\le h\le f$ on $E$, then
        \[
            \int_Eh\le\lim\inf\int_Ef_n.
        \]
        % To see this, suppose that $\int_Eh\le\lim\inf\int_Ef_n$ holds for all such $h$, but $\int_Ef>\lim\inf\int_Ef_n$.
        % \\Let $L=\lim\inf\int_Ef_n$. Then because $\int_Ef=\sup\biggl\{\int_Eh \biggr\}$:
        % \\If $\int_Ef<\infty$, there must exist an $h^*$ (bounded, measurable, finite support, $0\le h^*\le f$) such that
        % \[
        %     \int_Ef\ge\int_Eh^*>\int_Ef-\frac{\int_Ef-L}{2}>L.
        % \]
        % If $\int_Ef=\infty$, then $L<\int_Ef=\infty$, and for any real number $N\ge L$, there must exist an $h^*$ (bounded, measurable, finite support, $0\le h^*\le f$) such that
        % \[
        %     \int_Eh^*>N\ge L.
        % \]
        % However, both are a contradiction to $\int_Eh^*\le L=\lim\inf\int_Ef_n$.
        % Therefore $\int_Ef\le\lim\inf\int_Ef_n$.
        This is because $\int_Ef=\sup\biggl\{\int_Eh \biggr\}$; that is, the least upper bound.
        \\Now, consider a function $h$ that is bounded, measurable, finite support, and $0\le h\le f$.
        Then there exists $M\ge0$ for which $|h|\le M$ on $E$.
        Let $E_0=\{x\in E\ |\ h(x)\neq0\}$, so because $h$ is of finite support, $m(E_0)<\infty$.
        For $n\in\mathbb{N}$, define a function $h_n$ on $E$ by
        \[
            h_n=\min\{h,f_n\}\text{ on }E.    
        \]
        Then the function $h_n$ is measurable and
        \[
            0\le h_n\le M\text{ on }E_0\text{ and }h_n\equiv0\text{ on }E\setminus E_0\text{ (finite support)}.
        \]
        Also, for each $x$ in $E$, since $h(x)\le f(x)$ and $\{f_n(x)\}\to f(x)$, then $\{h_n(x)\}\to h(x)$.
        \\Then we have a sequence of measurable functions $\{h_n\}$ on a set of finite measure $E_0$.
        Also, there exists an $M$ such that $|h_n|\le M$ on $E_0$ for all $n$, and $\{h_n\}\to h$ pointwise on $E_0$. 
        Thus by the Bounded Convergence Theorem, we have $\lim_{n\to\infty}\int_{E_0}h_n=\int_{E_0}h$, and so
        \[
            \lim_{n\to\infty}\int_{E}h_n=\lim_{n\to\infty}\int_{E_0}h_n=\int_{E_0}h=\int_Eh.
        \]
        However, for each $n$, we have $h_n\le f_n$ on $E$ and by monotonicity, $\int_Eh_n\le\int_Ef_n$.
        Thus
        \[
            \int_Eh=\lim_{n\to\infty}\int_{E}h_n=\lim\inf\int_{E}h_n\le\lim\inf\int_{E}f_n.    
        \]
    \end{proof}
    \begin{namedthm*}{The Monotone Convergence Theorem}
        Let $\{f_n\}$ be an increasing sequence of nonnegative measurable functions on $E$.
        \[
            \text{If }\{f_n\}\to f\text{ pointwise a.e. on }E,\text{ then }\lim_{n\to\infty}\int_Ef_n=\int_Ef.
        \]
    \end{namedthm*}
    \begin{proof}
        By Fatou's Lemma, we have
        \[
            \int_Ef\le\lim\inf\int_Ef_n.  
        \]
        However, for each index $n$, because $\{f_n\}$ is increasing, we have $f_n\le f$ a.e. on $E$, and so $\int_Ef_n\le\int_Ef$.
        Therefore
        \[
            \lim\sup\int_Ef_n\le\int_Ef.
        \]
        Hence, $\lim\sup\int_Ef_n\le\int_Ef\le\lim\inf\int_Ef_n$ implies that
        \[
            \int_Ef=\lim_{n\to\infty}\int_Ef_n.
        \]
    \end{proof}
    \begin{namedthm*}{Corollary 12}
        Let $\{u_n\}$ be a sequence of nonnegative measurable functions on $E$.
        \[
            \text{If }f=\sum_{n=1}^\infty u_n\text{ pointwise a.e. on }E,\text{ then }\int_Ef=\sum_{n=1}^\infty\int_Eu_n.
        \]
    \end{namedthm*}
    \begin{proof}
        Let $f_k=\sum_{n=1}^ku_n$ so that $\{f_k\}$ is an increasing sequence of nonnegative measurable functions on $E$, and
        \[
            f=\sum_{n=1}^\infty u_n=\lim_{k\to\infty}\sum_{n=1}^ku_n=\lim_{k\to\infty}f_k\text{ pointwise a.e. on }E.
        \]
        Then by the Monotone Convergence Theorem and the linearity of integration, we have
        \[
            \int_Ef=\lim_{k\to\infty}\int_Ef_k=\lim_{k\to\infty}\int_E\sum_{n=1}^ku_n=\lim_{k\to\infty}\sum_{n=1}^k\int_Eu_n=\sum_{n=1}^\infty\int_Eu_n.
        \]
    \end{proof}
    \begin{namedthm*}{Definition}
        A nonnegative measurable function $f$ on a measurable set $E$ is said to be \textbf{integrable} over $E$ provided
        \[
            \int_Ef<\infty.    
        \]
    \end{namedthm*}
\end{flushleft}
\begin{center}
	\textbf{PROBLEMS}
\end{center}
\begin{enumerate}
	\setcounter{enumi}{16}
    \item Let $E$ be a set of measure zero and define $f\equiv\infty$ on $E$. Show that $\int_Ef=0$.\\
    \\(Recall Problem 9).
    If we suppose there exists a simple function that does not have an integral of zero, then there must exist some subset of $E_i$ of $E$ such that $m(E_i)>0$. 
    But this is a contradiction to the monotonicity of Lebesgue measure: $m(E_i)\le m(E)=0$.
    Therefore it must be that $\sup\biggl\{\int_E\varphi\ |\ \varphi\text{ simple, }\varphi\le f\text{ on }E\biggr\}=0=\inf\biggl\{\int_E\psi\ |\ \psi\text{ simple, }\psi\ge f\text{ on }E\biggr\}$ and $\int_Ef=0$.
    \item Show that the integral of a bounded measurable function of finite support is properly defined.\\
    \\Let $f$ on $E$ be a bounded measurable function of finite support. 
    \\That is, $m(E_0)=m(\{x\in E\ |\ f(x)\neq0\})<\infty$.
    \\We want to show that
    \[
        \int_Ef=\int_{E_0}f.
    \]
    First consider any simple function on $E_0$;
    we can write
    \[
        \varphi=\sum_{k=1}^nc_k\cdot \chi_{E_k}\text{ and }\int_{E_0}\varphi=\sum_{k=1}^n c_k\cdot m(E_k),
    \]
    where $E_k=\{x\in E_0\ |\ \varphi(x)=c_k\}$.
    \\Then extending $\varphi$ to $E$ by setting $\varphi(x)=0$ for $x\in E\setminus E_0$, see that
    \[
        \varphi=\sum_{k=1}^nc_k\cdot \chi_{E_k}+0\cdot\chi_{E\setminus E_0}\text{ and }\int_{E}\varphi=\sum_{k=1}^n c_k\cdot m(E_k) + 0\cdot m(E\setminus E_0). 
    \]
    However, $m(E\setminus E_0)=\infty$.
    We can use the $\sigma$-finiteness (see Chapter 17.1) of the Lebesgue measure to partition $E\setminus E_0$ into a countable union of disjoint measurable sets, each of finite measure.
    That is, $E\setminus E_0=\bigcup_{i=1}^\infty A_i$, where $m(A_i)<\infty$ for all $i$.
    We see that
    \begin{align*}
        \int_{E}\varphi&=\sum_{k=1}^n c_k\cdot m(E_k) + 0\cdot m(E\setminus E_0)\\
        &=\sum_{k=1}^n c_k\cdot m(E_k) + 0\cdot m(\bigcup_{i=1}^\infty A_i)\\
        &=\sum_{k=1}^n c_k\cdot m(E_k) + 0\cdot \sum_{i=1}^\infty m(A_i)\\
        &=\sum_{k=1}^n c_k\cdot m(E_k) + \sum_{i=1}^\infty 0\cdot m(A_i)\\
        &=\sum_{k=1}^n c_k\cdot m(E_k)\\
        &=\int_{E_0}\varphi.
    \end{align*}
    and therefore any simple function of finite support has $\int_{E}\varphi=\int_{E_0}\varphi$.\\
    \\Now, for any simple functions $\varphi$ and $\psi$ on on $E_0$ such that $\varphi\le f_{|_{E_0}}$ and $\psi\ge f_{|_{E_0}}$, there exists the extension $\varphi(x),\psi(x)=0$ for $x\in E\setminus E_0$ so that $0=\varphi(x)\le f(x)=0$ and $0=f(x)\le\psi(x)=0$ on $x\in E\setminus E_0$ and $\varphi\le f$ and $f\le \psi$ on all of $E$.
    \\Then because $\int_{E}\varphi=\int_{E_0}\varphi$ and $\int_{E}\psi=\int_{E_0}\psi$,
    \begin{align*}
        \biggl\{\int_{E}\varphi\ |\ \varphi\text{ simple, }\varphi\le f\text{ on }E\biggr\}\supseteq\biggl\{\int_{E_0}\varphi\ |\ \varphi\text{ simple, }\varphi\le f_{|_{E_0}}\text{ on }E_0\biggr\}\\
        \biggl\{\int_{E}\psi\ |\ \psi\text{ simple, }\psi\ge f\text{ on }E\biggr\}\supseteq\biggl\{\int_{E_0}\psi\ |\ \psi\text{ simple, }\psi\ge f_{|_{E_0}}\text{ on }E_0\biggr\}
    \end{align*}
    Then because $\sup\biggl\{\int_{E}\varphi\ |\ \varphi\text{ simple, }\varphi\le f\text{ on }E\biggr\}\le\inf\biggl\{\int_{E}\psi\ |\ \psi\text{ simple, }\psi\ge f\text{ on }E\biggr\}$ and 
    \begin{align*}
        \sup\biggl\{\int_{E}\varphi\ |\ \varphi\text{ simple, }\varphi\le f\text{ on }E\biggr\}\ge\sup\biggl\{\int_{E_0}\varphi\ |\ \varphi\text{ simple, }\varphi\le f_{|_{E_0}}\text{ on }E_0\biggr\}=\int_{E_0}f_{|_{E_0}}\\
        \inf\biggl\{\int_{E}\psi\ |\ \psi\text{ simple, }\psi\ge f\text{ on }E\biggr\}\le\inf\biggl\{\int_{E_0}\psi\ |\ \psi\text{ simple, }\psi\ge f_{|_{E_0}}\text{ on }E_0\biggr\}=\int_{E_0}f_{|_{E_0}}
    \end{align*}
    we have $\int_Ef=\int_{E_0}f_{|_{E_0}}$.
    \item For a number $\alpha$, define $f(x)=x^\alpha$ for $0<x\le1$, and $f(0)=0$. Compute $\int_0^1f$.\\
    \\Case $0\le\alpha$:
    \\Then the function $f(x)=x^\alpha$ is positive monotone on $[0,1]$, that is, 
    \[
        0\le x\le1\implies 0=0^\alpha\le x^\alpha\le1^\alpha=1,
    \]
    and $f$ is bounded by $1$ on the closed bounded interval $[0,1]$.\\
    \\Now we see that $f$ is Riemann integrable:
    \\For each natural number $m$, consider the partition $P_m=\{0,\frac{1}{m},\frac{2}{m},\cdots,\frac{m-1}{m},1\}=\{x_0,x_1,\cdots,x_m\}$.
    Then because $f$ is increasing, we have $f(x_{k-1})=\inf\{f(x)\ |\ x_{k-1}<x<x_k\}$ and $f(x_k)=\sup\{f(x)\ |\ x_{k-1}<x<x_k\}$, so that
    \begin{align*}
        L(f,P_m)&=\sum_{k=1}^m f(x_{k-1})\cdot\frac{1}{m}\\
        &=\sum_{k=1}^{m-1} f(x_k)\cdot\frac{1}{m}+f(x_0)\cdot\frac{1}{m}\\
        &=\sum_{k=1}^{m-1} f(x_k)\cdot\frac{1}{m}+0\cdot\frac{1}{m}\\
        &=\sum_{k=1}^{m-1} f(x_k)\cdot\frac{1}{m}
    \end{align*}
    and
    \begin{align*}
        U(f,P_m)&=\sum_{k=1}^m f(x_k)\cdot\frac{1}{m}\\
        &=\sum_{k=1}^{m-1} f(x_k)\cdot\frac{1}{m}+f(x_m)\cdot\frac{1}{m}\\
        &=\sum_{k=1}^{m-1} f(x_k)\cdot\frac{1}{m}+1\cdot\frac{1}{m}
    \end{align*}
    Then clearly we get $\lim_{m\to\infty}[U(f,P_m)-L(f,P_m)]=0$, with 
    \[
        U(f,P_m)=\sum_{k=1}^{m} f(x_k)\cdot\frac{1}{m}=\sum_{k=1}^{m} (\frac{k}{m})^\alpha\cdot\frac{1}{m},
    \]
    and $\lim_{m\to\infty}\sum_{k=1}^{m} (\frac{k}{m})^\alpha\cdot\frac{1}{m}=\frac{1}{\alpha+1}$.
    That is, we can see $\lim_{m\to\infty} \frac{\sum_{k=1}^{m}k^\alpha}{m^{\alpha+1}}-\frac{1}{\alpha+1}=0$.
    % \begin{align*}
    %     \frac{\sum_{k=1}^{m}k^\alpha}{m^{\alpha+1}}-\frac{1}{\alpha+1}
    %     =\frac{1}{\alpha+1}\left(\frac{\sum_{k=1}^{m}k^\alpha(\alpha+1)}{m^{\alpha+1}}-1\right)
    %     =\frac{1}{\alpha+1}\left(\frac{\sum_{k=1}^{m}[k^\alpha(\alpha+1)]-m^{\alpha+1}}{m^{\alpha+1}}\right)
    % \end{align*}
    \\(We can use integration to see:)
    \[
        \int_0^1x^\alpha = \left[\frac{x^{\alpha+1}}{\alpha+1}\right]_{x=0}^{x=1}=\left(\frac{1^{\alpha+1}}{\alpha+1}-\frac{0^{\alpha+1}}{\alpha+1}\right)=\left(\frac{1}{\alpha+1}\right).
    \]
    \\Case $-1<\alpha<0$:
    \\For each natural number $n$, define $f_n$ on $[0,1]$ such that
    \[
        f_n(x)=
        \begin{cases}
            f(x)=x^\alpha&\text{if }x\in[1/n,1]\\
            0&\text{if }x\in[0,1/n)
        \end{cases}
    \]
    Then $\{f_n\}$ is an increasing sequence of nonnegative measurable functions on $[0,1]$, and $\{f_n\}\to f$ pointwise on $[0,1]$.
    By the Monotone Convergence Theorem, $\lim_{n\to\infty}\int_0^1f_n=\int_0^1f$.\\
    \\Now,  because $f(x)=x^\alpha=\frac{1}{x^{-\alpha}}$ is negative monotone on $(0,1]$, that is, for any $n\in\mathbb{N}$,
    \[
        1/n\le x\implies (1/n)^{-\alpha}\le x^{-\alpha}\implies\frac{1}{x^{-\alpha}}\le\frac{1}{(1/n)^{-\alpha}}\implies x^\alpha\le(1/n)^\alpha,
    \] 
    then $f_n$ is bounded by $(1/n)^\alpha$ on the closed bounded interval $[0,1]$.\\
    \\Now we see that $f$ is Riemann integrable:
    \\Case $\alpha\le-1$:
    \\Consider the same sequence $\{f_n\}$ from the previous case. 
    We can use the Monotone Convergence Theorem.
    See again that $f_n$ is bounded by $(1/n)^\alpha$ on the closed bounded interval $[0,1]$, and is thus Riemann integrable.
    \item Let $\{f_n\}$ be a sequence of nonnegative measurable functions that converges to $f$ pointwise on $E$.
    Let $M\ge0$ be such that $\int_Ef_n\le M$ for all $n$. Show that $\int_Ef\le M$. Verify that this property is equivalent to the statement of Fatou's Lemma.\\
    \\Let $\{f_n\}$ be a sequence of nonnegative measurable functions that converges to $f$ pointwise on $E$.\\
    \\(Fatou's Lemma $\implies$ Property) Let $M\ge0$ be such that $\int_Ef_n\le M$ for all $n$.
    \\Then by Fatou's Lemma,
    \[
        \int_Ef\le\lim\inf\int_Ef_n\le M.
    \]
    (Property $\implies$ Fatou's Lemma) Suppose that $M\ge0$ with $\int_Ef_n\le M$ $\forall n$ implies $\int_Ef\le M$.
    \\Then, by Chapter 1 Problem 38, we know that $\lim\inf\left\{\int_Ef_n\right\}$ is the smallest cluster point of $\left\{\int_Ef_n\right\}$.
    That is, there exists a subsequence $\left\{\int_Ef_{n_k}\right\}$ that converges to $\lim\inf\left\{\int_Ef_n\right\}$.
    \\Fix $\epsilon>0$.
    \\Then there exists a natural number $N$ such that for $k\ge N$, then $\left|\int_Ef_{n_k}-\lim\inf\left\{\int_Ef_n\right\}\right|<\epsilon$.
    Then we have that $\{f_{n_k}\}$ is a sequence of measurable functions that converges to $f$ pointwise on $E$, and $\lim\inf\left\{\int_Ef_n\right\}+\epsilon\ge0$ with $\int_Ef_{n_k}<\lim\inf\left\{\int_Ef_n\right\}+\epsilon$,
    so the Property implies that $\int_E f\le\lim\inf\left\{\int_Ef_n\right\}+\epsilon$.
    \\Because this is true for any $\epsilon$, then $\int_E f\le\lim\inf\left\{\int_Ef_n\right\}$ holds.
    \item Let the function $f$ be nonnegative and integrable over $E$ and $\epsilon>0$. Show there is a simple function $\eta$ on $E$ that has finite support, $0\le\eta\le f$ on $E$ and $\int_E|f-\eta|<\epsilon$.
    If $E$ is a closed, bounded interval, show there is a step function $h$ on $E$ that has finite support and $\int_E|f-h|<\epsilon$.\\
    \\Fix $\epsilon>0$.
    \\For a nonnegative measurable function $f$ on $E$, we define the integral of $f$ over $E$ by
    \[
        \int_Ef:=\sup\biggl\{\int_Eh\ |\ h\text{ bounded, measurable, of finite support and }0\le h\le f\text{ on }E\biggr\},
    \]
    Then by definition of supremum, there exists $h\in\{ \text{h bounded, measurable, of finite support and }0\le h\le f\text{ on }E\}$ such that
    \[
        \int_Ef-\frac{\epsilon}{2}<\int_Eh\le\int_Ef.
    \]
    We can write this as
    \[
        \int_Ef-\int_Eh<\frac{\epsilon}{2}\tag{1}
    \]
    We have the definition of the integral of the bounded measurable function $h$ of finite support:
    \[
        \int_Eh:=\sup\biggl\{\int_E\varphi\ |\ \varphi\text{ simple, }0\le\varphi\le f\text{ on }E\biggr\}.
    \]
    Then by definition of supremum, there exists $\eta\in\{ \varphi\text{ simple, }0\le\varphi\le f\text{ on }E\}$ such that
    \[
        \int_Eh-\frac{\epsilon}{2}<\int_E\eta\le\int_Eh.
    \]
    We can write this as
    \[
        -\int_E\eta<-\int_Eh+\frac{\epsilon}{2}.\tag{2}
    \]
    Then by (1) and (2),
    \[
        \int_E[f-\eta]=\int_Ef-\int_E\eta<\int_Ef-\int_Eh+\frac{\epsilon}{2}<\frac{\epsilon}{2}+\frac{\epsilon}{2}=\epsilon.
    \]
    \item Let $\{f_n\}$ be a sequence of nonnegative measurable functions on $\mathbb{R}$ that converges pointwise on $\mathbb{R}$ to $f$ and $f$ be integrable over $\mathbb{R}$. Show that
    \[
        \text{if }\int_{\mathbb{R}}f=\lim_{n\to\infty}\int_{\mathbb{R}}f_n,\text{ then }\int_Ef=\lim_{n\to\infty}\int_Ef_n\text{ for any measurable set }E.    
    \]
    \\Let $E$ be a measurable set of real numbers.
    \\By Theorem 11, we have, for each $n$,
    \[
        \int_\mathbb{R}f_n=\int_Ef_n+\int_{E^c}f_n.\tag{1}
    \]
    Then because $f$ is integrable, then its integral $\int_{\mathbb{R}}f$ is finite, which by equality to $\lim_{n\to\infty}\int_{\mathbb{R}}f_n$ implies that the sequence $\left\{\int_{\mathbb{R}}f_n\right\}$ converges; that is,
    \[
        \infty>\int_{\mathbb{R}}f=\lim_{n\to\infty}\int_{\mathbb{R}}f_n=\liminf\int_{\mathbb{R}}f_n=\limsup\int_{\mathbb{R}}f_n.\tag{2}
    \]
    In particular, we have by (1), (2), and Fatou's Lemma for $\{f_n\}$ on $E^c$,
    % \[
    %     \int_\mathbb{R}f=\limsup\int_Ef_n+\liminf\int_{E^c}f_n.
    % \]
    % By Fatou's Lemma,
    \[
        \int_\mathbb{R}f-\limsup\int_Ef_n=\liminf\int_{E^c}f_n\ge\int_{E^c}f,
    \]
    so that, rearranging,
    \[
        \int_Ef=\int_\mathbb{R}f-\int_{E^c}f\ge\limsup\int_Ef_n.\tag{a}
    \]
    Then by Fatou's Lemma for $\{f_n\}$ on $E$,
    \[
        \int_Ef\le\liminf\int_Ef_n.\tag{b}
    \]
    Then (a), (b), and the fact that $\liminf\int_Ef_n\le\limsup\int_Ef_n$ imply equality:
    \[
        \int_Ef=\lim_{n\to\infty}\int_Ef_n.
    \]
    \item Let $\{a_n\}$ be a sequence of nonnegative real numbers. Define the function $f$ on $E=[1,\infty)$ by setting $f(x)=a_n$ if $n\le x<n+1$. Show that $\int_Ef=\sum_{n=1}^\infty a_n$.\\
    \\Because each $a_n$ is nonnegative, we can define a sequence of increasing functions $\{f_k\}$ on $[1,\infty)$ by
    \[
        f_k(x)=
        \begin{cases}
            a_n&x\in[n,n+1)\text{ for each }n\in\{1,\dots,k\}\\
            0&\text{else}
        \end{cases}
    \]
    Then each $f_k$ is a simple function of finite support $\bigcup_{n=1}^k[n,n+1)$ so that
    \[
        \int_{[1,\infty)}f_k=\sum_{n=1}^ka_n\cdot m([n,n+1))=\sum_{n=1}^ka_n.
    \]
    Also, $\{f_k\}\to f$ pointwise so that, by the Monotone Convergence Theorem,
    \[
        \sum_{n=1}^\infty a_n=\lim_{k\to\infty}\sum_{n=1}^k a_n=\lim_{k\to\infty}\int_{[1,\infty)}f_k=\int_{[1,\infty)}f.
    \]
    \item Let $f$ be a nonnegative measurable function on $E$.
    \begin{enumerate}[label=(\roman*),align=left]
        \item Show there is an increasing sequence $\{\varphi_n\}$ of nonnegative simple functions on $E$, each of finite support, which converges pointwise on $E$ to $f$.\\
        \\See the Simple Approximation Theorem from Chapter 3.
        \item Show that $\int_Ef=\sup\{\int_E\varphi\ |\ \varphi\text{ simple, of finite support and }0\le\varphi\le f\text{ on }E\}$.\\
        % \\For a nonnegative measurable function $f$ on $E$, we define the integral of $f$ over $E$ by
        % \[
        %     \int_Ef:=\sup\biggl\{\int_Eh\ |\ h\text{ bounded, measurable, of finite support and }0\le h\le f\text{ on }E\biggr\},
        % \]
        % where the integral of each bounded measurable function $h$ of finite support has an integral defined by
        % \[
        %     \int_Eh:=\sup\biggl\{\int_E\varphi\ |\ \varphi\text{ simple, }\varphi\le f\text{ on }E\biggr\}=\inf\biggl\{\int_E\psi\ |\ \psi\text{ simple, }\psi\ge f\text{ on }E\biggr\}.
        % \]
        \\By the Monotone Convergence Theorem with (i), we have that
        \[
            \sup_n\int_E\varphi_n=\lim_{n\to\infty}\int_E\varphi_n=\int_Ef.
        \]
    \end{enumerate}
    \item Let $\{f_n\}$ be a sequence of nonnegative measurable functions on $E$ that converges pointwise on $E$ to $f$. Suppose $f_n\le f$ on $E$ for each $n$. Show that
    \[
        \lim_{n\to\infty}\int_Ef_n=\int_Ef.
    \]
    \\(similar to Monotone Convergence Theorem)
    \\By monotonicity of integration, we get
    \[
        \lim\sup\int_Ef_n\le \int_Ef.
    \]
    By Fatou's Lemma,
    \[
        \int_Ef\le\lim\inf\int_Ef_n.     
    \]
    Then $\lim\inf\int_Ef_n\le\lim\sup\int_Ef_n$ (see Chapter 1 Problem 41) implies equality:
    \[
        \lim_{n\to\infty}\int_Ef_n=\int_Ef.
    \]
    \item Show that the Monotone Convergence Theorem may not hold for decreasing sequences of functions.\\
    \\We can define a decreasing sequence of nonnegative measurable functions $f_n:[0,\infty)\to\mathbb{R}$ by
    \[
        f_n(x)=
        \begin{cases}
            0&x<n\\
            1&x\ge n
        \end{cases}
    \]
    Then $\{f_n\}\to f\equiv0$ pointwise on $[0,\infty)$, but $\int_{[0,\infty)}f_n=\infty$ (not integrable over $[0,\infty)$) for all $n$, and so
    \[
        \lim_{n\to\infty}\int_{[0,\infty)}f_n=\infty\neq0=\int_{[0,\infty)}f.
    \]
    \item Prove the following generalization of Fatou's Lemma: If $\{f_n\}$ is a sequence of nonnegative measurable functions on $E$, then 
    \[
        \int_E\lim\inf f_n\le\lim\inf\int_Ef_n.     
    \]
    \\We have, for each $n$,
    \[
        0\le\inf_{k\ge n} f_k(x)\le f_n(x)\text{ for all }x,
    \]
    and so by monotonicity of integration,
    \[
    \int_E\inf_{k\ge n} f_k(x)\le\int_Ef_n,
    \]
    and by the Monotone Convergence Theorem for the sequence $\{\inf_{k\ge n} f_k\}\to\lim_n\inf_{k\ge n} f_k$,
    \[
    \int_E\lim_n\inf_{k\ge n} f_k(x)=\lim_n\int_E\inf_{k\ge n} f_k(x)\le\lim\inf_n\int_Ef_n.
    \]
\end{enumerate}
    
% 4.4
\authoredby{inprogress}
\section{The General Lebesgue Integral}
For an extended real-valued function $f$ on $E$, we have defined the positive part $f^+$ and the negative part $f^-$ of $f$, respectively, by
\[
    f^+(x)=\max\{f(x),0\},\text{ and }f^-(x)=\max\{-f(x),0\}\text{ for all }x\in E.
\]
Then $f^+$ and $f^-$ are nonnegative functions on $E$,
\[
    f=f^+-f^-\text{ on }E,
\]
and
\[
    |f|=f^++f^-\text{ on }E.
\]
\begin{namedthm*}{Definition}
    A measurable function $f$ on $E$ is said to be \textbf{integrable} over $E$ provided $|f|$ is integrable over $E$.
    When this is so we define the integral of $f$ over $E$ by
    \[
        \int_Ef=\int_Ef^+-\int_Ef^-.
    \]  
\end{namedthm*}
\begin{namedthm*}{Proposition 16}[the Integral Comparison Test]
    Let $f$ be a measurable function on $E$.
    Suppose there is a nonnegative function $g$ that is integrable over $E$ and dominates $f$ in the sense that
    \[
        |f|\le g\text{ on }E.
    \]
    Then $f$ is integrable over $E$ and 
    \[
        \left|\int_Ef\right|\le\int_E|f|.
    \]
\end{namedthm*}
\begin{proof}
    By the monotonicity of integration for nonnegative functions, we have $\int_E|f|\le\int_Eg<\infty$, which implies $|f|$ is integrable, and thus $f$ is integrable.
    \\Then by the triangle inequality and the linearity of integration,
    \[
        \left|\int_Ef\right|=\left|\int_Ef^+-\int_Ef^-\right|\le\int_Ef^++\int_Ef^-=\int_E|f|.
    \]
\end{proof}
\begin{namedthm*}{The Lebesgue Dominated Convergence Theorem}
    Let $\{f_n\}$ be a sequence of measurable functions on $E$.
    Suppose there is a function $g$ that is integrable over $E$ and dominates $\{f_n\}$ on $E$ in the sense that $|f_n|\le g$ on $E$ for all $n$.
    \[
        \text{If }\{f_n\}\to f\text{ pointwise a.e. on }E,\text{ then }f\text{ is integrable over }E\text{ and }\lim_{n\to\infty}\int_Ef_n=\int_Ef.
    \]
\end{namedthm*}
\begin{proof}
    Since $|f_n|\le g$ on $E$ and $|f|\le g$ a.e. on $E$ and $g$ is integrable over $E$, by the integral comparison test, $f$ and each $f_n$ also are integrable over $E$.
    We infer from Proposition 15 that, by possibly excising from $E$ a countable collection of sets of measure zero and using the countable additivity of Lebesgue measure, we may assume that $f$ and each $f_n$ is finite on $E$.
    The function $g-f$ and for each $n$, the function $g-f_n$, are properly defined, nonnegative, and measurable.
    Morever, the sequence $\{g-f_n\}$ converges pointwise a.e. on $E$ to $g-f$.
    \\By Fatou's Lemma,
    \[
        \int_E(g-f)\le\liminf\int_E(g-f_n).
    \]
    Thus, by the linearity of integration for measurable functions and $\liminf(-a_n)=-\limsup(a_n)$ (Chapter 1 Proposition 19 (iii)),
    \[
        \int_Eg-\int_Ef=\int_E(g-f)\le\liminf\int_E(g-f_n)=\int_Eg+\liminf\left(-\int_Ef_n\right)=\int_Eg-\limsup\int_Ef_n,
    \]
    which tells us that
    \[
        \limsup\int_Ef_n\le\int_Ef.
    \]
    Similarly by Fatou's Lemma for the sequence $\{g+f_n\}$,
    \[
        \int_Eg+\int_Ef=\int_E(g+f)\le\liminf\int_E(g+f_n)=\int_Eg+\liminf\int_Ef_n,
    \]
    which tells us that
    \[
        \int_Ef\le\liminf\int_Ef_n.
    \]
\end{proof}
\begin{namedthm*}{Theorem 19}[General Lebesgue Dominated Convergence Theorem]
    Let $\{f_n\}$ be a sequence of measurable functions on $E$ that converges pointwise a.e. on $E$ to $f$.
    Suppose there is a sequence $\{g_n\}$ of nonnegative measurable functions on $E$ that converges pointwise a.e. on $E$ to $g$ and dominates $\{f_n\}$ on $E$ in the sense that
    \[
        |f_n|\le g_n\text{ on }E\text{ for all }n. 
    \]
    \[
        \text{If }\lim_{n\to\infty}\int_Eg_n=\int_Eg<\infty,\text{ then }\lim_{n\to\infty}\int_Ef_n=\int_Ef.
    \]
\end{namedthm*}

\begin{center}
	\textbf{PROBLEMS}
\end{center}
\begin{enumerate}
	\setcounter{enumi}{27}
    \item Let $f$ be integrable over $E$ and let $C$ be a measurable subset of $E$. Show that $\int_Cf=\int_Ef\cdot\chi_C$.\\
    \\We have
    \item For a measurable function $f$ on $[1,\infty)$ which is bounded on bounded sets, define $a_n=\int_n^{n+1}f$ for each natural number $n$.
    Is it true that $f$ is integrable over $[1,\infty)$ iff the series $\sum_{n=1}^\infty a_n$ converges?
    Is it true that $f$ is integrable over $[1,\infty)$ iff the series $\sum_{n=1}^\infty a_n$ converges absolutely?\\
    \\
    \item Let $g$ be a nonnegative integrable function over $E$ and suppose $\{f_n\}$ is a sequence of measurable functions on $E$ such that for each $n$, $|f_n|\le g$ a.e. on $E$. Show that
    \[
        \int_E\lim\inf f_n \le \lim\inf\int_E f_n \le \lim\sup\int_E f_n \le \int_E\lim\sup f_n.
    \]
    \item Let $f$ be a measurable function on $E$ which can be expressed as $f=g+h$ on $E$, where $g$ is finite and integrable over $E$ and $h$ is nonnegative on $E$.
    Define $\int_Ef=\int_Eg+\int_Eh$. Show that this is properly defined in the sense that it is independent of the particular choice of finite integrable function $g$ and nonnegative function $h$ whose sum is $f$.
    \item Prove the General Lebesgue Dominated Convergence Theorem by following the proof of the Lebesgue Dominated Convergence Theorem, but replacing the sequences $\{g-f_n\}$ and $\{g+f_n\}$, respectively, by $\{g_n-f_n\}$ and $\{g_n+f_n\}$.
    \item Let $\{f_n\}$ be a sequence of integrable functions on $E$ for which $f_n\to f$ a.e. on $E$ and $f$ is integrable over $E$. Show that $\int_E|f-f_n|\to0$ iff $\lim_{n\to\infty}\int_E|f_n|=\int_E|f|$.
    (Hint: use the General Lebesgue Dominated Convergence Theorem.)
    \item Let $f$ be a nonnegative measurable function on $\mathbb{R}$. Show that 
    \[
        \lim_{n\to\infty}\int_{-n}^nf=\int_{\mathbb{R}}f.
    \]  
    \\Define, for each $n$, the function
    \[
        f_n=f\cdot\chi_{[-n,n]},
    \] 
    so that because $f$ is nonnegative and measurable, $\{f_n\}$ is an increasing sequence of nonnegative measurable functions on $\mathbb{R}$ that converges pointwise to $f$ on $\mathbb{R}$.
    \\Then by the Monotone Convergence Theorem, 
    \[
        \lim_{n\to\infty}\int_{[-n,n]}f=\lim_{n\to\infty}\int_Ef\cdot\chi_{[-n,n]}=\lim_{n\to\infty}\int_Ef_n=\int_Ef.
    \] 
    \item Let $f$ be a real-valued function of two variables $(x,y)$ that is defined on the square $Q=\{(x,y)\ |\ 0\le x\le 1,0\le y\le 1\}$ and is a measurable function of $x$ for each fixed value of $y$.
    Suppose for each fixed value of $x$, $\lim_{y\to0}f(x,y)=f(x)$ and that for all $y$, we have $|f(x,y)|\le g(x)$, where $g$ is integrable over $[0,1]$. Show that
    \[
    \lim_{y\to0}\int_0^1f(x,y)dx=\int_0^1f(x)dx.    
    \] 
    Also show that if the function $f(x,y)$ is continuous in $y$ for each $x$, then 
    \[
        h(y)=\int_0^1f(x,y)dx 
    \]
    is a continuous function of $y$.
    \item Let $f$ be a real-valued function of two variables $(x,y)$ that is defined on the square $Q=\{(x,y)\ |\ 0\le x\le 1,0\le y\le 1\}$ and is a measurable function of $x$ for each fixed value of $y$.
    For each $(x,y)\in Q$ let the partial derivative $\partial f/\partial y$ exist. Suppose there is a function $g$ that is integrable over $[0,1]$ and such that 
    \[
        \biggl | \frac{\partial f}{\partial y}(x,y) \biggr | \le g(x)\text{ for all }(x,y)\in Q.
    \]
    Prove that 
    \[
        \frac{d}{dy}\biggl[\int_0^1f(x,y)dx\biggr]=\int_0^1\frac{\partial f}{\partial y}(x,y)dx\text{ for all }y\in [0,1].
    \]
\end{enumerate}

% 4.5
\authoredby{untouched}
\section{Countable Additivity and Continuity of Integration}
\begin{center}
	\textbf{PROBLEMS}
\end{center}
\begin{enumerate}
	\setcounter{enumi}{36}
    \item Let $f$ be an integrable function on $E$. Show that for each $\epsilon>0$, there is a natural number $N$ for which if $n\ge N$, then $|int_{E_n}f|<\epsilon$ where $E_n=\{x\in E\ |\ |x|\ge n\}$.
    \item For each of the two functions $f$ on $[1,\infty)$ defined below, show that $\lim_{n\to\infty}\int_1^nf$ exists while $f$ is not integrable over $[1,\infty)$. Does this contradict the continuity of integration?
    \begin{enumerate}[label=(\roman*),align=left]
        \item Define $f(x)=\frac{(-1)^n}{n}$, for $n\le x < n+1$.
        \item Define $f(x) = \frac{(\sin x)}{x}$ for $1\le x<\infty$.
    \end{enumerate}
    \item Prove the theorem regarding the continuity of integration.
\end{enumerate}

% 4.6
\section{Uniform Integrability: The Vitali Convergence Theorem}
\begin{center}
	\textbf{PROBLEMS}
\end{center}
\begin{enumerate}
	\setcounter{enumi}{39}
    \item Let $f$ be integrable over $\mathbb{R}$. Show that the function $F$ defined by 
    \[
        F(x) = \int_{-\infty}^xf\text{ for all }x\in\mathbb{R}
    \]
    is properly defined and continuous. Is it necessarily Lipschitz?
    \item Show that Proposition 25 is false if $E=\mathbb{R}$.
    \item Show that Theorem 26 is false without the assumption that the $h_n$'s are nonnegative.
    \item Let the sequences of functions $\{h_n\}$ and $\{g_n\}$ be uniformly integrable over $E$. Show that for any $\alpha$ and $\beta$, the sequence of linear combinations $\{\alpha f_n + \beta g_n\}$ also is uniformly integrable over $E$.
    \item Let $f$ be integrable over $\mathbb{R}$ and let $\epsilon>0$. Establish the following three approximation properties. 
    \begin{enumerate}[label=(\roman*),align=left]
        \item There is a simple function $\eta$ on $\mathbb{R}$ which has finite support and $\int_{\mathbb{R}}|f-\eta|<\epsilon$. (Hint: first verify this if $f$ is nonnegative.)
        \item There is a step function $s$ on $\mathbb{R}$ which vanishes outside a closed, bounded interval and $\int_{\mathbb{R}}|f-s|<\epsilon$. (Hint: apply part (i) and Problem 18 of Chapter 3.)
        \item There is a continuous function $g$ on $\mathbb{R}$ which vanishes outside a bounded set and $\int_{\mathbb{R}}|f-g|<\epsilon$.
    \end{enumerate}
    \item Let $f$ be integrable over $E$. Define $\hat f$ to be the extension of $f$ to all of $\mathbb{R}$ obtained by setting $\hat f \equiv 0$ outside of $E$. 
    Show that $\hat f$ is integrable over $\mathbb{R}$ and $\int_Ef=\int_{\mathbb{R}}\hat f$.
    Use this and part (i) and (iii) of the preceding problem to show that for $\epsilon>0$, there is a simple function $\eta$ on $E$ and a continuous function $g$ on $E$ for which $\in_E|f-\eta|<\epsilon$ and $\in_E|f-g|<\epsilon$.
    \item (Riemann-Lebesgue) Let $f$ be integrable over $(-\infty,\infty)$. Show That
    \[
        \lim_{n\to\infty}\int_{-\infty}^\infty f(x) \cos nxdx=0.    
    \]
    (Hint: first show this for $f$ is a step function that vanishes outside a closed, bounded interval and then use the approximation property (ii) of Problem 44.)
    \item Let $f$ be integrable over $(-\infty,\infty)$.
    \begin{enumerate}[label=(\roman*),align=left]
        \item Show that for each $t$,
        \[
            \int_{-\infty}^\infty f(x)dx=\int_{-\infty}^\infty f(x+t)dx.  
        \]
        \item Let $g$ be a bounded measurable function on $\mathbb{R}$. Show that 
        \[
            \lim_{t\to0}\int_{-\infty}^\infty g(x)\cdot[f(x)-f(x+t)]=0.
        \] 
        (Hint: first show this, using uniform continuity of $f$ on $\mathbb{R}$, if $f$ is continuous and vanishes outside a bounded set. Then use the approximation property (iii) of Problem 44.)
    \end{enumerate}
    \item Let $f$ be integrable over $E$ and let $g$ be a bounded measurable function on $E$. Show that $f\cdot g$ is integrable over $E$.
    \item Let $f$ be integrable over $\mathbb{R}$. Show that the following four assertions are equivalent:
    \begin{enumerate}[label=(\roman*),align=left]
        \item $f=0$ a.e. on $\mathbb{R}$.
        \item $\int_{\mathbb{R}}fg=0$ for every bounded measurable function $g$ on $\mathbb{R}$.
        \item $\int_Af=0$ for every measurable set $A$.
        \item $\int_{\mathcal{O}}f=0$ for every open set $\mathcal{O}$.
    \end{enumerate}
    \item Let $\mathcal{F}$ be a family of functions, each of which is integrable over $E$. Show that $\mathcal{F}$ is uniformly integrable over $E$ iff for each $\epsilon>0$, there is a $\delta>0$ such that for each $f\in\mathcal{F}$,
    \[
        \text{if }A\subseteq E\text{ is measurable and }m(A)<\delta,\text{ then }\biggl |\int_Af\biggr |<\epsilon.
    \]
    \item Let $\mathcal{F}$ be a family of functions, each of which is integrable over $E$. Show that $\mathcal{F}$ is uniformly integrable over $E$ iff for each $\epsilon>0$, there is a $\delta>0$ such that for each $f\in\mathcal{F}$,
    \[
        \text{if }\mathcal{U}\text{ is open and }m(E\cap\mathcal{U})<\delta,\text{ then }\int_{E\cap\mathcal{U}}|f|<\epsilon.
    \]
\end{enumerate}