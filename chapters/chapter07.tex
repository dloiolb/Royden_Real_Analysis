% Chapter 7
\chapter{The $L^p$ Spaces: Completeness and Approximation}

% 7.1
\section{Normed Linear Spaces}
\begin{flushleft}
	
	Throughout this chapter $E$ denotes a measurable set of real numbers.
	Define $\mathcal{F}$ to be the collection of all measurable extended real-valued functions on $E$ that are finite a.e. on $E$.
	We can say that two functions $f,g\in\mathcal{F}$ are equivalent, denoted by $f\cong g$, provided
	\[
	f(x)=g(x)\text{ for almost all }x\in E.	
	\]
	This is an equivalence relation and induces a partition of $\mathcal{F}$ into a disjoint collection of equivalence classes, denoted by $\mathcal{F}/\cong$, which is a linear space.
	There is a natural family $\{L^p(E)\}_{1\le p\le\infty}$ of subspaces of $\mathcal{F}/\cong$.
	\\
	For $1\le p<\infty$, define $L^p(E)$ to be the collection of equivalence class $[f]$ for which 
	\[
	\int_E|f|^p<\infty.	
	\]
	Then if $f\cong g$, then $\int_E|f|^p=\int_E|g|^p$.
	Showing that $L^p(E)$ is closed under linear combinations will prove that $L^p(E)$ is a linear subspace.
	To do this, let $c=\max\{|a|,|b|\}$ so that
	\[
	|a+b|\le|a|+|b|\le 2c,
	\]
	which implies
	\[
	|a+b|^p\le 2^pc^p\le2^p(|a|^p+|b|^p).	
	\]
	This inequality, together with the linearity and monotonicity of integration tells us that 
	\[
		\int_E|\alpha f+\beta g|^p \le 2^p(|\alpha|^p\int_E|f|^p+|\beta|^p\int_E| g|^p)<\infty.
	\]
	That is, for $[f],[g]\in L^p(E)$, then $\alpha[f]+\beta[g]\in L^p(E)$.\\
	We call a function $f\in\mathcal{F}$ \textbf{essentially bounded} provided there is some $M\ge 0$, called an \textbf{essential upper bound} for $f$, for which
	\[
	|f(x)|\le M\text{ for almost all }x\in E.	
	\]
	Then we can define $L^\infty(E)$ to be the collection of equivalence classes $[f]$ for which $f$ is essentially bounded. 
	Clearly $L^\infty(E)$ is a linear subspace because
	\[
	|\alpha f(x)+\beta g(x)|\le|\alpha| |f(x)|+|\beta|| g(x)|\le |\alpha| M + |\beta|M' = M'' \text{ a.e. on $E$}
	\]
	To state that a function $f$ in $L^p[a,b]$ is continuous means that there is a continuous function that agrees with $f$ a.e. on $[a,b]$.
	There is only one such continuous function and it is often convenient to consider this unique continuous function as the representative of $[f]$.\\
	It is useful to consider real-valued functions that have as their domain linear spaces of functions: such functions are called \textbf{functionals}.

	\begin{namedthm*}{Definition}
		Let $X$ be a linear space.
		A real-valued functional $\|\cdot\|$  on $X$ is called a \textbf{norm} provided for each $f$ and $g$ in $X$ and each real number $\alpha$,\\
		(The Triangle Inequality)
		\[
			\|f+g\|\le\|f\|+\|g\|,
		\]
		(Positive Homogeneity)
		\[
			\|\alpha f\|=|\alpha|\|f\|,	
		\]
		(Nonnegativity)
		\[
			\|f\|\ge 0\text{ and }\|f\|=0 \iff f=0.
		\]
	\end{namedthm*}
	A \textbf{normed linear space} is a linear space together with a norm.
	If $X$ is a linear space normed by $\|\cdot\|$ we say that a function $f$ in $X$ is a \textbf{unit function} provided $\|f\|=1$.
	For any $f\in X,f\neq 0$, the function $\frac{f}{\|f\|}$ is a unit function: it is a scalar multiple of $f$ which we call the \textbf{normalization} of $f$.

	\begin{namedthm*}{Example}[The Normed Linear Space $L^1(E)$]
		For a function $f$ in $L^1(E)$, define
		\[
		\|f\|_1=\int_E|f|.	
		\]
		Then $\|\cdot\|$ is a norm on $L^1(E)$.\\
		For $f,g\in L^1(E)\subseteq \mathcal{F}$, since $f$ and $g$ are finite a.e. on $E$, the triangle inequality for real numbers tells us that
		\[
		|f+g|\le|f|+|g|\text{ a.e. on }E.	
		\]
		Then by the monotonicity and linearity of integration, we have subadditivity:
		\[
			\|f+g\|_1=\int_E|f+g| \le \int_E[|f|+|g|] = \int_E|f| +\int_E|g| = \|f\|_1+\|g\|_1.	
		\]
		By the linearity of integration, clearly we have absolute homogeneity:
		\[
			\|\alpha f\|_1 = \int_E|\alpha f| = \int_E|\alpha| |f|=|\alpha|\int_E| f| = |\alpha|\|f\|_1.	
		\]
		Clearly $\|f\|$ is nonnegative. Finally, if $f\in L^1(E)$ and $\|f\|_1=0$, then $f=0$ a.e. on $E$. 
		Therefore $[f]$ is the zero element of the linear space $L^1(E)\subseteq \mathcal{F}/\cong$, that is $f=0$.
	\end{namedthm*}

	\begin{namedthm*}{Example}[The Normed Linear Space $L^\infty(E)$]
		For a function $f$ in $L^\infty(E)$, define $\|f\|_\infty$ to be the infimum of the essential upper bounds for $f$.
		\[
			\|f\|_\infty = \inf\{M\ :\ |f(x)|\le M\text{ a.e. on }E\}.
		\]
		We call $\|f\|_\infty$ the \textbf{essential supremum} of $f$ and claim that $\|\cdot\|_\infty$ is a norm on $L^\infty(E)$.
		\\Nonnegativity and positive homogeneity are clear. 
		\\To show that the triangle inequality holds, we see that for each natural number $n$, there is a subset $E_n$ of $E$ for which
		\[
		|f|\le \|f\|_\infty + \frac{1}{n}\text{ on }E\setminus E_n\text{ and }m(E_n)=0.	
		\]
		This is true because $\|f\|_\infty$ is the infimum, the greatest lower bound, so $\|f\|_\infty + \frac{1}{n}$ is not a lower bound and thus there exists a real number $M$ in the set of upper bounds a.e. of $f$ for which $\|f\|_\infty\le M < \|f\|_\infty + \frac{1}{n}$ a.e. on $E$, and so $|f|\le M < \|f\|_\infty + \frac{1}{n}$ a.e. on $E$.
		\\Accepting that the union of sets of measure zero is also measure zero, we can let $E_\infty = \bigcup_{n=1}^\infty E_n$, and so 
		\[
		|f|\le \|f\|_\infty \text{ on }E\setminus E_\infty\text{ and }m(E_n\infty)=0.	
		\]
		Thus we have that $|f|\le \|f\|_\infty$ a.e. on $E$; i.e., ess. sup$f$ is the smallest essential upper bound for $f$.
		\\Now, for $f,g\in L^\infty(E)$, 
		\[
			|f+g|\le|f|+|g|\le\|f\|_\infty+\|g\|_\infty\text{ a.e. on }E.
		\]
		Therefore $\|f\|_\infty+\|g\|_\infty$ is an essential bound for $f+g$ and thus the smallest essential upper bound, $\|f+g\|_\infty$, is such that
		\[
		\|f+g\|_\infty \le \|f\|_\infty+\|g\|_\infty.	
		\]
	\end{namedthm*}

	\begin{namedthm*}{Example}[The Normed Linear Spaces $\ell^1$ and $\ell^\infty$]
		For $1\le p<\infty$, define $\ell^p$ to be the collection of real sequences $a=(a_1,a_2,\cdots)$ for which 
		\[
		\sum_{k=1}^\infty|a_k|^p<\infty .	
		\]
		Let $a,b \in \ell^p$, and let $\alpha , \beta$ be real numbers.
		Then we have that $\sum_{k=1}^\infty|a_k|^p<\infty$ and $\sum_{k=1}^\infty|b_k|^p<\infty$.
		Using the inequality $|a+b|^p\le2^p(|a|^p+|b|^p)$, we have
		\begin{align*}
			\sum_{k=1}^\infty|\alpha a_k + \beta b_k|^p &\le \sum_{k=1}^\infty[2^p(|\alpha a_k|^p + |\beta b_k|^p)]\\ 
			&=\sum_{k=1}^\infty2^p|\alpha|^p |a_k|^p+\sum_{k=1}^\infty2^p|\beta|^p| b_k|^p\\
			&=2^p|\alpha|^p\sum_{k=1}^\infty |a_k|^p+2^p|\beta|^p\sum_{k=1}^\infty| b_k|^p\\
			&< 2^p|\alpha|^p\infty+2^p|\beta|^p\infty\\
			&=\infty.
		\end{align*}
		Thus $\ell^p$ is a linear space.\\
		We define $\ell^\infty$ to be the linear space of real bounded sequences: that is, for any $\{a_k\}$ in $\ell^\infty$, there exists a real number $M$ for which $|a_k|\le M$ for all $k$.
		We can define the following norms:
		\\For $\{a_k\}\in\ell^1$:
		\[
			\|\{a_k\}\|_1 = \sum_{k=1}^\infty|a_k|
		\]
		For $\{a_k\}\in\ell^\infty$:
		\[
			\|\{a_k\}\|_\infty = \sup_{1\le k<\infty}|a_k|
		\]
	\end{namedthm*}

	\begin{namedthm*}{Example}[The Normed Linear Space $C\lbrack a,b\rbrack$]
		Let $[a,b]$ be a closed, bounded interval. 
		The the linear space of continuous real-valued functions on $[a,b]$ is denoted by $C[a,b]$. 
		Since a continuous function on a compact set takes on a maximum value (ch1 problem 52), we can Define
		\[
		\|f\|_{\max}=\max_{x\in [a,b]}|f(x)|.	
		\]		
	\end{namedthm*}

\end{flushleft}
\begin{center}
	\textbf{PROBLEMS}
\end{center}
\begin{enumerate}
	\setcounter{enumi}{0}
	\item For $f$ in $C[a,b]$, Define
	\[
	\| f \|_1 = \int_a^b |f|.	
	\]
	Show that this is a norm on $C[a,b]$.\\\\
	Let $f,g\in C[a,b]$. For each $x\in [a.b]$, we have the inequality $|f(x)+g(x)|\le|f(x)|+|g(x)|$, so by monotonicity and linearity of integration,
	\[
	\|f+g\|_1=\int_a^b|f(x)+g(x)| \le \int_a^b[|f(x)|+|g(x)|] = \int_a^b|f(x)| +\int_a^b|g(x)| = \|f\|_1+\|g\|_1.	
	\]
	Therefore subadditivity holds.\\
	Also, by linearity of integration, we have
	\[
	\|\alpha f\|_1 = \int_a^b|\alpha f| = \int_a^b|\alpha| |f|=|\alpha|\int_a^b| f| = |\alpha|\|f\|_1.	
	\]
	Therefore absolute homogeneity holds.\\
	Finally, by definition of absolute value, $0 \le |f(x)|$ for all $x\in [a,b]$, and by monotonicity of integration,
	\[
	0=\int_a^b 0 \le \int_a^b |f| = \|f\|_1.	
	\] 
	Clearly $\int_a^b |f| = 0$ iff $f\equiv 0$ on $[a,b]$.
	Therefore positive definiteness holds.\\
	Thus $\|\cdot\|_1$ is a norm on $C[a,b]$.\\
	Also show that there is no number $c \ge 0$ for which
	\[
	\| f \|_{\max}	\le c \| f \|_1 \text{ for all $f$ in $C[a,b]$},
	\]
	\\
	Consider the interval $[a,b]=[0,1]$.
	For any $c>0$ we choose, there exists an $n\in \mathbb{N}$ such that $n> c$, with the continuous function $f_n:[0,1]\to \mathbb{R}$ defined as
	\[ 
		f_n(x) =
		\begin{cases} 
			\frac{n-0}{1/n-0}x& \text{ if } x \in [0,\frac{1}{n}]\\
			\frac{0-n}{2/n-1/n}(x-\frac{1}{n})+n & \text{ if } x \in (\frac{1}{n},\frac{2}{n}]\\
			0& \text{ if } x \in (\frac{2}{n},1]
		\end{cases}
		=
		\begin{cases} 
			n^2x& \text{ if } x \in [0,\frac{1}{n}]\\
			-n^2(x-\frac{1}{n})+n & \text{ if } x \in (\frac{1}{n},\frac{2}{n}]\\
			0& \text{ if } x \in (\frac{2}{n},1]
		\end{cases}
	\]
	(This is a triangle-shaped function that reaches its peak $n$ at $x=\frac{1}{n}$.)\\
	Now, for any $n$, we have $\|f_n\|_1 = \int_0^1|f_n|=1$, and $\|f_n\|_{\max} = n$.\\
	Then $\| f \|_{\max}=n > c =  c \| f \|_1$.\\
	\\
	but there is a $c \ge 0$ for which 
	\[
	\| f \|_1	\le c \| f \|_{\max} \text{ for all $f$ in $C[a,b]$}.
	\]
	\\
	We can see that for any $f$ in $C[a,b]$, by monotonicity of the integral, 
	\begin{align*}
	\|f\|_1 &= \int_a^b|f(x)|\\ 
	&\le \int_a^b\max_{x\in [a,b]}|f(x)|\\
	&=\max_{x\in [a,b]}|f(x)| \int_a^b1\\
	&= \max_{x\in [a,b]}|f(x)| \cdot m([a,b]) \\
	&= \|f\|_{\max} \cdot m([a,b]).
	\end{align*}
	Therefore $\|f\|_1\le m([a,b])\|f\|_{\max}$ for all $f\in C[a,b]$.
	\item Let $X$ be the family of all polynomials with real coefficients defined on $\mathbb{R}$.
	Show that this is a linear space. For a polynomial $p$, define $\| p\|$ to be the sum of the absolute values of the coefficients of $p$.
	Is this a norm?\\
	For any two polynomials $p,q\in X$, there exists natural numbers $n,m$ (suppose without loss of generality that $n\le m$) such that
	\begin{align*}
	p(x) &= a_0+a_1x+a_2x^2+\cdots+a_{n-1}x^{n-1}+a_nx^n+\cdots+0x^m	\\
	q(x) &= b_0+b_1x+b_2x^2+\cdots+b_{n-1}x^{n-1}+b_nx^n+\cdots+b_mx^m	
	\end{align*}
	Now, considering any scalars $\alpha,\beta \in \mathbb{R}$, we have
	\begin{align*}
		\alpha p(x) + \beta q(x) &= \alpha (a_0+a_1x+a_2x^2+\cdots+a_{n-1}x^{n-1}+a_nx^n)\\
		&+ \beta (b_0+b_1x+b_2x^2+\cdots+b_{m-1}x^{m-1}+b_mx^m)\\
		&=(\alpha a_0)+(\alpha a_1)x+(\alpha a_2)x^2+\cdots+(\alpha a_{n-1})x^{n-1}+(\alpha a_n)x^n\\
		&+ (\beta b_0)+(\beta b_1)x+(\beta b_2)x^2+\cdots+(\beta b_{n-1})x^{n-1}+(\beta b_n)x^n+\cdots+(\beta b_m)x^m\\
		&=(\alpha a_0+\beta b_0)+(\alpha a_1+\beta b_1)x+\cdots+(\alpha a_n+\beta b_n)x^n+\cdots+(\beta b_m)x^m
	\end{align*}
	This is also a polynomial, as for each $i$, we have $(\alpha a_i+\beta b_i) \in \mathbb{R}$, so $X$ is a linear space.\\
	Now, for any polynomial
	\[
		p(x) = a_0+a_1x+a_2x^2+\cdots+a_nx^n,	
	\]
	we can define $\|p\| = |a_0|+|a_1|+|a_2|+\cdots+|a_n| = \sum_{i=0}^n|a_i|$.\\
	The triangle inequality is clear because 
	\[
		\|p+q\| = \sum_{i=0}^{m}|a_i+b_i|\le\sum_{i=0}^{m}[|a_i|+|b_i|]=\sum_{i=0}^{m}|a_i|+\sum_{i=0}^{m}|b_i|=\|p\|+\|q\|.
	\]
	Absolute homogeneity is clear because
	\[
		\|\alpha p\| = \sum_{i=0}^n|\alpha a_i|= \sum_{i=0}^n|\alpha|| a_i|=|\alpha|\sum_{i=0}^n| a_i|=|\alpha|\|p\|.
	\]
	Finally, positive definiteness is clear because
	\[
		0 \le |a_i| \implies 0\le \sum_{i=0}^n| a_i|=\|p\|,
	\]
	And $\|p\|=0$ if and only if $p(x)= 0+0x+0x^2+\cdots0x^n=0$.
	\item For $f$ in $L^1[a,b]$, define $\|f\| = \smallint_a^b x^2 |f(x)|dx$.
	Show that this is a norm on $L^1[a,b]$.\\
	For $f\in L^1[a,b]$, then $f$ is measurable and finite a.e. on $[a,b]$, and $\int_a^b|f(x)|dx<\infty$.\\
	Let $f,g\in L^1[a,b]$, and let $\alpha$ be a real number.\\
	Because the triangle inequality holds a.e. on $[a,b]$, by monotonicity and linearity of the integral, we have
	\begin{align*}
	\|f+g\|&=\int_a^b x^2 |f(x)+g(x)|dx\\
	&\le\int_a^b x^2 [|f(x)|+|g(x)|]dx\\
	&=\int_a^b [x^2 |f(x)|+x^2|g(x)|]dx\\
	&=\int_a^b x^2 |f(x)|dx+\int_a^b x^2 |g(x)|dx\\
	&= \|f\|+\|g\|.	
	\end{align*}
	Therefore $\|\cdot\|$ is subadditive.\\
	By linearity of the integral, we have
	\[
	\|\alpha f\| = \int_a^bx^2|\alpha f(x)|dx = \int_a^bx^2|\alpha| |f(x)|dx=|\alpha |\int_a^bx^2 |f(x)|dx	=|\alpha |\|f\|.
	\]
	Therefore $\|\cdot\|$ satisfies absolute homogeneity.\\
	We can use the fact that $0\le x^2$ and $0\le |f(x)|$ implies $0\le x^2|f(x)|$.
	By monotonicity of the integral, we have
	\[
	0=\int_a^b0dx \le \int_a^bx^2|f(x)|dx = \|f\|.
	\]
	Clearly $\|f\|=0$ if and only if $f=0$ a.e. on $[a,b]$ because $x^2\cdot 0 = 0$.\\
	Therefore $\|\cdot \|$ satisfies positive definiteness.
	\item For $f$ in $L^\infty[a,b]$, show that 
	\[
	\| f\|_\infty = \min \biggl \{ M \ \biggl |\ m \{x \in [a,b]\ |\ |f(x)| > M \} =0 \biggr \},
	\] 
	\\
	That is, the sup norm is the smallest real number $M$ such that $|f(x)|>M$ only on a set of measure zero.
	In an above example, we showed that $\|f\|_\infty$ is the smallest essential upper bound for $f$.
	That is, $|f|\le\|f\|_\infty$ a.e. on $E$ (That is, the inequality is true for $E\setminus E_0$, where $m(E_0)=0$.)
	\\
	and if, furthermore, $f$ is continuous on $[a,b]$, that
	\[
	\| f \|_{\infty} = \| f \|_{\max}.	
	\]
	If $f$ is continuous, then there are no jump discontinuities ($f$ is continuous at $x_0$ iff $f(x_0^-)=f(x_0)=f(x_0^+)$).
	Then $|f|\le\|f\|_\infty$ everywhere on $E$.
	\item Show that $\ell^\infty$ and $\ell^1$ are normed linear spaces.\\
	$\ell^\infty$:\\
	Let $a,b \in \ell^\infty$, and let $\alpha , \beta$ be real numbers.\\
	Then for some real numbers $M,N$, we have that $|a_k|\le M$ and $|b_k|\le N$ for all $k$.
	\begin{align*}
		\alpha a + \beta b &= \alpha (a_1,a_2,\cdots)+ \beta (b_1,b_2,\cdots)\\		
		&= (\alpha a_1,\alpha a_2,\cdots)+ (\beta b_1,\beta b_2,\cdots)\\
		&= (\alpha a_1+\beta b_1,\alpha a_2+\beta b_2,\cdots)
	\end{align*}
	Then $|\alpha a_k+\beta b_k|\le \alpha M + \beta N$ for all $k$, and $\ell^\infty$ is a linear space.\\
	To show that $\|a\|_\infty = \sup_{1\le k<\infty}|a_k|$ is a norm:
	\[
		\|a+b\|_\infty = \sup_{1\le k<\infty}|a_k+b_k|\le \sup_{1\le i<\infty}|a_i| + \sup_{1\le j<\infty}|b_j| = \|a\|_\infty + \|b\|_\infty,
	\]
	\[
		\|\alpha a\|_\infty = \sup_{1\le k<\infty}|\alpha a_k| = \sup_{1\le k<\infty}|\alpha|| a_k|= |\alpha|\sup_{1\le k<\infty}| a_k|=|\alpha|\|a\|_\infty, 
	\]
	\[
		0 \le \sup_{1\le k<\infty}| a_k| = \|a\|_\infty,\text{ and }\sup_{1\le k<\infty}| a_k|=0\text{ iff }a_k=0\text{ for all }k.	
	\]
	\\
	$\ell^1$:\\
	Let $a,b \in \ell^1$, and let $\alpha , \beta$ be real numbers.\\
	Then we have that $\sum_{k=1}^\infty|a_k|<\infty$ and $\sum_{k=1}^\infty|b_k|<\infty$.\\
	By the triangle inequality for real numbers, we have
	\[
		\sum_{k=1}^\infty |\alpha a_k + \beta b_k| \le\sum_{k=1}^\infty[ |\alpha|| a_k| + | \beta ||b_k|]= |\alpha|\sum_{k=1}^\infty | a_k| + |\beta |\sum_{k=1}^\infty |b_k| <|\alpha|\infty+|\beta|\infty = \infty.
	\]
	Therefore $\ell^1$ is a linear space.\\
	To show that $\|a\|_1 = \sum_{k=1}^\infty|a_k|$ is a norm:
	\[
		\|a+b\|_1 = \sum_{k=1}^\infty|a_k+b_k|\le\sum_{k=1}^\infty[|a_k|+|b_k|]=\sum_{k=1}^\infty|a_k|+\sum_{k=1}^\infty|b_k|<\infty +\infty = \infty,
	\]
	\[
		\|\alpha a\|_1 = \sum_{k=1}^\infty|\alpha a_k| = \sum_{k=1}^\infty|\alpha|| a_k|=|\alpha|\sum_{k=1}^\infty| a_k|=|\alpha|\|a\|_1, 
	\]
	\[
		0 \le | a_k| \implies 0 \le \sum_{k=1}^\infty |a_k| = \|a\|_1,\text{ and }\sum_{k=1}^\infty| a_k|=0\text{ iff }a_k=0\text{ for all }k.	
	\]
\end{enumerate}

% 7.2
\section{The Inequalities of Young, H\"older, and Minkowski}

\begin{center}
	\textbf{PROBLEMS}
\end{center}
\begin{enumerate}
	\setcounter{enumi}{5}
	\item Show that if H\"older's Inequality is true for normalized functions it is true in general.
	\item Verify the assertions in the above two examples regarding the membership of the function $f$ in $L^p(E)$. 
\end{enumerate}

% 7.3
\section{$L^p$ is Complete: The Riesz-Fischer Theorem}

% 7.4
\section{Approximation and Separability}
